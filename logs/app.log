10-06;00:10:59.315 INFO  [                          main][       c.c.a.w.c.SupplierInitializerTest][]: Starting SupplierInitializerTest using Java 17.0.7 on user-VirtualBox with PID 5534 (started by user in /home/user/WORK/REPO/NO_WORK/TelegramNotificationService)
10-06;00:10:59.317 DEBUG [                          main][       c.c.a.w.c.SupplierInitializerTest][]: Running with Spring Boot v2.6.3, Spring v5.3.15
10-06;00:10:59.317 INFO  [                          main][       c.c.a.w.c.SupplierInitializerTest][]: No active profile set, falling back to default profiles: default
10-06;00:11:02.235 DEBUG [                          main][j.LocalContainerEntityManagerFactoryBean][]: Building JPA container EntityManagerFactory for persistence unit 'default'
10-06;00:11:03.470 INFO  [                          main][j.LocalContainerEntityManagerFactoryBean][]: Initialized JPA EntityManagerFactory for persistence unit 'default'
10-06;00:11:03.572 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:03.612 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:03.679 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:03.727 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:03.729 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:03.779 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:04.152 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:04.156 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:04.163 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:04.431 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:04.455 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:04.469 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:04.569 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:04.572 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:04.578 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:04.583 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:04.584 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:04.590 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:04.596 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:04.598 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:04.608 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:04.609 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:04.614 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:04.619 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:04.620 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:04.628 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:04.629 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:04.659 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:04.662 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:04.667 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:04.768 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [com.company.app.exchange_rate.component.ExchangeRateExtractor.extract]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:11:04.769 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(805349789<open>)] for JPA transaction
10-06;00:11:04.772 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@3229f7dc]
10-06;00:11:04.793 DEBUG [                  scheduling-1][      c.c.a.c.a.l.p.PerformanceLogAspect][]: **********     created [com.company.app.core.aop.logging.performance.PerformanceLogAspect]     **********
10-06;00:11:04.805 DEBUG [                  scheduling-1][.a.c.a.l.p.c.PerformanceLogGuidExtractor][]: [2b3e2c48-0f5d-4517-a5f1-954fd3ef4e37] выковыривание guid заняло [0] ms.
10-06;00:11:04.805 DEBUG [                  scheduling-1][      c.c.a.c.a.l.p.PerformanceLogAspect][]: [2b3e2c48-0f5d-4517-a5f1-954fd3ef4e37]: запущен com.company.app.exchange_rate.component.ExchangeRateExtractor.extract
10-06;00:11:04.817 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(805349789<open>)] for JPA transaction
10-06;00:11:04.818 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:11:04.843 DEBUG [                  scheduling-1][      c.c.a.c.a.l.p.PerformanceLogAspect][]: [2b3e2c48-0f5d-4517-a5f1-954fd3ef4e37]: за [39] ms выполнен com.company.app.exchange_rate.component.ExchangeRateExtractor.extract
10-06;00:11:04.844 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:11:04.844 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(805349789<open>)]
10-06;00:11:04.855 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(805349789<open>)] after transaction
10-06;00:11:04.855 DEBUG [                  scheduling-1][   c.c.a.e.s.ExchangeRateSchedulerConfig][]: exchange rate: ali: [105,83]
10-06;00:11:04.856 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [com.company.app.telegram.TelegramFacade.writeToEveryone]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:11:04.856 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(1831882738<open>)] for JPA transaction
10-06;00:11:04.856 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@32006433]
10-06;00:11:04.877 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(1831882738<open>)] for JPA transaction
10-06;00:11:04.878 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:11:04.899 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:11:04.900 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(1831882738<open>)]
10-06;00:11:04.901 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(1831882738<open>)] after transaction
10-06;00:11:05.405 INFO  [                          main][         c.c.a.t.c.TelegramBotConfigImpl][]: **********     The telegram bot has been created.     **********
10-06;00:11:05.516 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [com.company.app.telegram.domain.initializer.Initializer.init]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:11:05.517 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(1672787330<open>)] for JPA transaction
10-06;00:11:05.518 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@69c21701]
10-06;00:11:05.522 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(1672787330<open>)] for JPA transaction
10-06;00:11:05.523 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:11:05.565 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(1672787330<open>)] for JPA transaction
10-06;00:11:05.565 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:11:05.620 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(1672787330<open>)] for JPA transaction
10-06;00:11:05.620 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:11:05.624 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:11:05.624 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(1672787330<open>)]
10-06;00:11:05.639 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(1672787330<open>)] after transaction
10-06;00:11:05.644 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.saveAll]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:11:05.645 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(1269719904<open>)] for JPA transaction
10-06;00:11:05.645 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@1bd3a199]
10-06;00:11:05.652 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:11:05.653 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(1269719904<open>)]
10-06;00:11:05.655 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(1269719904<open>)] after transaction
10-06;00:11:05.660 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.saveAll]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:11:05.661 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(1033264308<open>)] for JPA transaction
10-06;00:11:05.661 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@45094caa]
10-06;00:11:05.663 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:11:05.663 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(1033264308<open>)]
10-06;00:11:05.670 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(1033264308<open>)] after transaction
10-06;00:11:05.674 INFO  [                          main][       c.c.a.w.c.SupplierInitializerTest][]: Started SupplierInitializerTest in 6.657 seconds (JVM running for 8.191)
10-06;00:11:05.691 INFO  [                          main][                       c.c.a.Application][]: *******************  The app has been started.  *******************
10-06;00:11:05.708 DEBUG [                          main][c.c.a.c.SpringBootTestApplicationContext][]: **********     run spring boot test context     **********
10-06;00:11:05.741 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findAll]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
10-06;00:11:05.742 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(1705943735<open>)] for JPA transaction
10-06;00:11:05.744 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@776a5594]
10-06;00:11:05.750 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:11:05.750 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(1705943735<open>)]
10-06;00:11:05.751 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(1705943735<open>)] after transaction
10-06;00:11:05.780 DEBUG [                          main][c.c.a.c.SpringBootTestApplicationContext][]: **********     run spring boot test context     **********
10-06;00:11:05.783 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:11:05.784 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(1453687377<open>)] for JPA transaction
10-06;00:11:05.784 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@22108d2b]
10-06;00:11:05.785 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:11:05.785 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(1453687377<open>)]
10-06;00:11:05.787 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(1453687377<open>)] after transaction
10-06;00:11:05.788 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [com.company.app.wildberries_desire_lot.scheduler.executor.component.WildberriesDesireLotRefresher.refresh]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:11:05.788 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(1611594185<open>)] for JPA transaction
10-06;00:11:05.788 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@66cea424]
10-06;00:11:05.788 DEBUG [                          main][.a.c.a.l.p.c.PerformanceLogGuidExtractor][]: [70be8d38-b07c-4f69-97bd-7830d3c5133c] выковыривание guid заняло [0] ms.
10-06;00:11:05.788 DEBUG [                          main][      c.c.a.c.a.l.p.PerformanceLogAspect][]: [70be8d38-b07c-4f69-97bd-7830d3c5133c]: запущен com.company.app.wildberries_desire_lot.scheduler.executor.component.WildberriesDesireLotRefresher.refresh
10-06;00:11:05.792 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(1611594185<open>)] for JPA transaction
10-06;00:11:05.792 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:11:05.802 DEBUG [                          main][               c.c.a.c.GetRequestHandler][]: try to get response: [https://card.wb.ru/cards/detail?appType=1&curr=rub&dest=-1257786&regions=80,38,83,4,64,33,68,70,30,40,86,75,69,1,66,110,22,48,31,71,114&spp=31&nm=43409221]
10-06;00:11:06.094 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(1611594185<open>)] for JPA transaction
10-06;00:11:06.095 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:11:06.098 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(1611594185<open>)] for JPA transaction
10-06;00:11:06.098 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:11:06.100 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(1611594185<open>)] for JPA transaction
10-06;00:11:06.100 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:11:06.102 DEBUG [                          main][      c.c.a.c.a.l.p.PerformanceLogAspect][]: [70be8d38-b07c-4f69-97bd-7830d3c5133c]: за [314] ms выполнен com.company.app.wildberries_desire_lot.scheduler.executor.component.WildberriesDesireLotRefresher.refresh
10-06;00:11:06.103 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:11:06.103 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(1611594185<open>)]
10-06;00:11:06.107 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(1611594185<open>)] after transaction
10-06;00:11:06.114 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:06.118 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:06.141 DEBUG [                          main][c.c.a.c.SpringBootTestApplicationContext][]: **********     run spring boot test context     **********
10-06;00:11:06.143 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:11:06.143 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(1686855890<open>)] for JPA transaction
10-06;00:11:06.143 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@6fffb752]
10-06;00:11:06.144 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:11:06.145 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(1686855890<open>)]
10-06;00:11:06.146 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(1686855890<open>)] after transaction
10-06;00:11:06.147 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:11:06.147 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(1791404956<open>)] for JPA transaction
10-06;00:11:06.147 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@79e50fc1]
10-06;00:11:06.148 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:11:06.148 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(1791404956<open>)]
10-06;00:11:06.149 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(1791404956<open>)] after transaction
10-06;00:11:06.150 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:11:06.150 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(2095525646<open>)] for JPA transaction
10-06;00:11:06.150 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@45e3a250]
10-06;00:11:06.154 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:11:06.154 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(2095525646<open>)]
10-06;00:11:06.155 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(2095525646<open>)] after transaction
10-06;00:11:06.156 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:06.187 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.saveAll]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:11:06.187 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(438855964<open>)] for JPA transaction
10-06;00:11:06.188 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@6620a7fa]
10-06;00:11:06.189 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:11:06.189 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(438855964<open>)]
10-06;00:11:06.192 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(438855964<open>)] after transaction
10-06;00:11:06.192 DEBUG [                          main][c.c.a.c.SpringBootTestApplicationContext][]: **********     run spring boot test context     **********
10-06;00:11:06.195 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findAll]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
10-06;00:11:06.195 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(1175655749<open>)] for JPA transaction
10-06;00:11:06.195 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@452440c0]
10-06;00:11:06.210 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:11:06.211 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(1175655749<open>)]
10-06;00:11:06.211 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(1175655749<open>)] after transaction
10-06;00:11:06.219 DEBUG [                          main][c.c.a.c.SpringBootTestApplicationContext][]: **********     run spring boot test context     **********
10-06;00:11:06.222 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [null]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:11:06.222 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(842513561<open>)] for JPA transaction
10-06;00:11:06.223 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@7d1ec8bc]
10-06;00:11:06.223 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(842513561<open>)] for JPA transaction
10-06;00:11:06.223 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:11:06.224 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(842513561<open>)] for JPA transaction
10-06;00:11:06.224 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:11:06.225 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(842513561<open>)] for JPA transaction
10-06;00:11:06.225 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:11:06.226 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:11:06.226 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(842513561<open>)]
10-06;00:11:06.228 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(842513561<open>)] after transaction
10-06;00:11:06.228 DEBUG [                          main][.WildberriesDesireControllerExecutorTest][]: *****
10-06;00:11:06.229 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [com.company.app.wildberries_desire_lot.controller.executor.WildberriesDesireControllerExecutor.getFulfilledDesires]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:11:06.229 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(197190171<open>)] for JPA transaction
10-06;00:11:06.229 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@1da6e963]
10-06;00:11:06.229 DEBUG [                          main][.a.c.a.l.p.c.PerformanceLogGuidExtractor][]: [dd4a50ef-8d83-41d1-b860-b889bdcbdc9c] выковыривание guid заняло [0] ms.
10-06;00:11:06.229 DEBUG [                          main][      c.c.a.c.a.l.p.PerformanceLogAspect][]: [dd4a50ef-8d83-41d1-b860-b889bdcbdc9c]: запущен com.company.app.wildberries_desire_lot.controller.executor.WildberriesDesireControllerExecutor.getFulfilledDesires
10-06;00:11:06.235 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(197190171<open>)] for JPA transaction
10-06;00:11:06.235 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:11:06.244 DEBUG [                          main][      c.c.a.c.a.l.p.PerformanceLogAspect][]: [dd4a50ef-8d83-41d1-b860-b889bdcbdc9c]: за [14] ms вернул [1] шт. выполнен com.company.app.wildberries_desire_lot.controller.executor.WildberriesDesireControllerExecutor.getFulfilledDesires
10-06;00:11:06.244 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:11:06.244 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(197190171<open>)]
10-06;00:11:06.245 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(197190171<open>)] after transaction
10-06;00:11:06.245 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [com.company.app.wildberries_desire_lot.controller.executor.WildberriesDesireControllerExecutor.getFulfilledDesires]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:11:06.246 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(1796513146<open>)] for JPA transaction
10-06;00:11:06.246 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@78182a]
10-06;00:11:06.246 DEBUG [                          main][.a.c.a.l.p.c.PerformanceLogGuidExtractor][]: [d6a79e20-bd4f-4dfb-95a4-d5d53bc5a72c] выковыривание guid заняло [0] ms.
10-06;00:11:06.246 DEBUG [                          main][      c.c.a.c.a.l.p.PerformanceLogAspect][]: [d6a79e20-bd4f-4dfb-95a4-d5d53bc5a72c]: запущен com.company.app.wildberries_desire_lot.controller.executor.WildberriesDesireControllerExecutor.getFulfilledDesires
10-06;00:11:06.246 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(1796513146<open>)] for JPA transaction
10-06;00:11:06.247 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:11:06.248 DEBUG [                          main][      c.c.a.c.a.l.p.PerformanceLogAspect][]: [d6a79e20-bd4f-4dfb-95a4-d5d53bc5a72c]: за [1] ms вернул [0] шт. выполнен com.company.app.wildberries_desire_lot.controller.executor.WildberriesDesireControllerExecutor.getFulfilledDesires
10-06;00:11:06.248 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:11:06.248 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(1796513146<open>)]
10-06;00:11:06.248 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(1796513146<open>)] after transaction
10-06;00:11:06.256 DEBUG [                          main][c.c.a.c.SpringBootTestApplicationContext][]: **********     run spring boot test context     **********
10-06;00:11:06.266 DEBUG [                          main][c.c.a.c.SpringBootTestApplicationContext][]: **********     run spring boot test context     **********
10-06;00:11:06.269 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findOne]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
10-06;00:11:06.270 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(135306920<open>)] for JPA transaction
10-06;00:11:06.270 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@4e26bb75]
10-06;00:11:06.279 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:11:06.279 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(135306920<open>)]
10-06;00:11:06.280 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(135306920<open>)] after transaction
10-06;00:11:06.282 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:11:06.282 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(2113036879<open>)] for JPA transaction
10-06;00:11:06.282 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@176413e2]
10-06;00:11:06.283 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:11:06.283 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(2113036879<open>)]
10-06;00:11:06.284 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(2113036879<open>)] after transaction
10-06;00:11:06.285 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:11:06.285 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(120323421<open>)] for JPA transaction
10-06;00:11:06.285 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@7b213a09]
10-06;00:11:06.286 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:11:06.286 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(120323421<open>)]
10-06;00:11:06.287 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(120323421<open>)] after transaction
10-06;00:11:06.288 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findAll]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
10-06;00:11:06.288 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(287328320<open>)] for JPA transaction
10-06;00:11:06.288 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@c4e27f8]
10-06;00:11:06.291 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:11:06.291 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(287328320<open>)]
10-06;00:11:06.292 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(287328320<open>)] after transaction
10-06;00:11:06.292 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.saveAll]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:11:06.292 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(938550430<open>)] for JPA transaction
10-06;00:11:06.293 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@1050dd61]
10-06;00:11:06.293 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:11:06.293 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(938550430<open>)]
10-06;00:11:06.294 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(938550430<open>)] after transaction
10-06;00:11:06.295 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.deleteAll]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:11:06.296 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(1917944675<open>)] for JPA transaction
10-06;00:11:06.296 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@39ec2988]
10-06;00:11:06.317 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:11:06.318 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(1917944675<open>)]
10-06;00:11:06.321 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(1917944675<open>)] after transaction
10-06;00:11:06.322 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [com.company.app.telegram.TelegramFacade.writeToTargetChat]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:11:06.322 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(1959560770<open>)] for JPA transaction
10-06;00:11:06.322 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@49401c88]
10-06;00:11:06.323 DEBUG [                          main][              c.c.a.t.d.s.HistoryService][]: try to write to telegram with chat name: [653606407] message: [Добавлено желание: артикль 13341986, цена 300]
10-06;00:11:06.331 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(1959560770<open>)] for JPA transaction
10-06;00:11:06.332 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:11:06.333 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating transaction failed - marking existing transaction as rollback-only
10-06;00:11:06.333 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Setting JPA transaction on EntityManager [SessionImpl(1959560770<open>)] rollback-only
10-06;00:11:06.336 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction rollback
10-06;00:11:06.336 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Rolling back JPA transaction on EntityManager [SessionImpl(1959560770<open>)]
10-06;00:11:06.338 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(1959560770<open>)] after transaction
10-06;00:11:06.532 DEBUG [                          main][c.c.a.c.SpringBootTestApplicationContext][]: **********     run spring boot test context     **********
10-06;00:11:06.541 DEBUG [                          main][c.c.a.c.SpringBootTestApplicationContext][]: **********     run spring boot test context     **********
10-06;00:11:06.546 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findAll]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
10-06;00:11:06.546 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(1289320953<open>)] for JPA transaction
10-06;00:11:06.546 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@3d76a548]
10-06;00:11:06.548 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:11:06.548 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(1289320953<open>)]
10-06;00:11:06.549 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(1289320953<open>)] after transaction
10-06;00:11:06.736 INFO  [ SpringApplicationShutdownHook][j.LocalContainerEntityManagerFactoryBean][]: Closing JPA EntityManagerFactory for persistence unit 'default'
10-06;00:11:29.156 INFO  [                          main][.a.t.i.m.IncomingMessageTaskExecutorTest][]: Starting IncomingMessageTaskExecutorTest using Java 17.0.7 on user-VirtualBox with PID 5688 (started by user in /home/user/WORK/REPO/NO_WORK/TelegramNotificationService)
10-06;00:11:29.158 DEBUG [                          main][.a.t.i.m.IncomingMessageTaskExecutorTest][]: Running with Spring Boot v2.6.3, Spring v5.3.15
10-06;00:11:29.158 INFO  [                          main][.a.t.i.m.IncomingMessageTaskExecutorTest][]: No active profile set, falling back to default profiles: default
10-06;00:11:30.741 DEBUG [                          main][j.LocalContainerEntityManagerFactoryBean][]: Building JPA container EntityManagerFactory for persistence unit 'default'
10-06;00:11:31.385 INFO  [                          main][j.LocalContainerEntityManagerFactoryBean][]: Initialized JPA EntityManagerFactory for persistence unit 'default'
10-06;00:11:31.467 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:31.490 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:31.549 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:31.577 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:31.578 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:31.600 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:31.848 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:31.860 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:31.866 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:32.095 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:32.101 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:32.109 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:32.111 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:32.116 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:32.140 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:32.140 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:32.147 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:32.152 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:32.154 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:32.163 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:32.164 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:32.200 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:32.244 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:32.245 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:32.250 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:32.255 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:32.257 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:32.262 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:32.266 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:32.267 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:32.371 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [com.company.app.exchange_rate.component.ExchangeRateExtractor.extract]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:11:32.373 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(846443791<open>)] for JPA transaction
10-06;00:11:32.375 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@72e3338]
10-06;00:11:32.411 DEBUG [                  scheduling-1][      c.c.a.c.a.l.p.PerformanceLogAspect][]: **********     created [com.company.app.core.aop.logging.performance.PerformanceLogAspect]     **********
10-06;00:11:32.418 DEBUG [                  scheduling-1][.a.c.a.l.p.c.PerformanceLogGuidExtractor][]: [d288d206-f40e-4371-a339-7921b9d28c89] выковыривание guid заняло [0] ms.
10-06;00:11:32.419 DEBUG [                  scheduling-1][      c.c.a.c.a.l.p.PerformanceLogAspect][]: [d288d206-f40e-4371-a339-7921b9d28c89]: запущен com.company.app.exchange_rate.component.ExchangeRateExtractor.extract
10-06;00:11:32.474 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(846443791<open>)] for JPA transaction
10-06;00:11:32.475 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:11:32.498 DEBUG [                  scheduling-1][      c.c.a.c.a.l.p.PerformanceLogAspect][]: [d288d206-f40e-4371-a339-7921b9d28c89]: за [80] ms выполнен com.company.app.exchange_rate.component.ExchangeRateExtractor.extract
10-06;00:11:32.498 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:11:32.498 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(846443791<open>)]
10-06;00:11:32.506 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(846443791<open>)] after transaction
10-06;00:11:32.506 DEBUG [                  scheduling-1][   c.c.a.e.s.ExchangeRateSchedulerConfig][]: exchange rate: ali: [105,83]
10-06;00:11:32.507 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [com.company.app.telegram.TelegramFacade.writeToEveryone]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:11:32.507 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(1665384871<open>)] for JPA transaction
10-06;00:11:32.507 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@310c62b3]
10-06;00:11:32.517 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(1665384871<open>)] for JPA transaction
10-06;00:11:32.517 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:11:32.529 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:11:32.529 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(1665384871<open>)]
10-06;00:11:32.530 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(1665384871<open>)] after transaction
10-06;00:11:32.871 INFO  [                          main][         c.c.a.t.c.TelegramBotConfigImpl][]: **********     The telegram bot has been created.     **********
10-06;00:11:32.966 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [com.company.app.telegram.domain.initializer.Initializer.init]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:11:32.967 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(1770925242<open>)] for JPA transaction
10-06;00:11:32.967 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@6cf47d05]
10-06;00:11:32.969 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(1770925242<open>)] for JPA transaction
10-06;00:11:32.970 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:11:32.994 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(1770925242<open>)] for JPA transaction
10-06;00:11:32.994 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:11:33.001 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(1770925242<open>)] for JPA transaction
10-06;00:11:33.001 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:11:33.008 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:11:33.008 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(1770925242<open>)]
10-06;00:11:33.021 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(1770925242<open>)] after transaction
10-06;00:11:33.024 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.saveAll]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:11:33.024 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(1225658391<open>)] for JPA transaction
10-06;00:11:33.024 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@2ddb260e]
10-06;00:11:33.026 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:11:33.026 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(1225658391<open>)]
10-06;00:11:33.028 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(1225658391<open>)] after transaction
10-06;00:11:33.030 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.saveAll]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:11:33.031 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(1537504092<open>)] for JPA transaction
10-06;00:11:33.031 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@70b437bb]
10-06;00:11:33.032 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:11:33.032 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(1537504092<open>)]
10-06;00:11:33.033 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(1537504092<open>)] after transaction
10-06;00:11:33.036 INFO  [                          main][.a.t.i.m.IncomingMessageTaskExecutorTest][]: Started IncomingMessageTaskExecutorTest in 4.042 seconds (JVM running for 4.65)
10-06;00:11:33.045 INFO  [                          main][                       c.c.a.Application][]: *******************  The app has been started.  *******************
10-06;00:11:33.059 DEBUG [                          main][c.c.a.c.SpringBootTestApplicationContext][]: **********     run spring boot test context     **********
10-06;00:11:33.077 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findOne]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
10-06;00:11:33.078 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(889096613<open>)] for JPA transaction
10-06;00:11:33.079 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@42b6acc2]
10-06;00:11:33.093 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:11:33.094 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(889096613<open>)]
10-06;00:11:33.094 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(889096613<open>)] after transaction
10-06;00:11:33.096 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:11:33.097 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(1317929042<open>)] for JPA transaction
10-06;00:11:33.097 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@5a2ce458]
10-06;00:11:33.098 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:11:33.098 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(1317929042<open>)]
10-06;00:11:33.099 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(1317929042<open>)] after transaction
10-06;00:11:33.099 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:11:33.099 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(493077795<open>)] for JPA transaction
10-06;00:11:33.099 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@64f55630]
10-06;00:11:33.100 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:11:33.100 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(493077795<open>)]
10-06;00:11:33.101 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(493077795<open>)] after transaction
10-06;00:11:33.102 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findAll]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
10-06;00:11:33.102 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(1756099245<open>)] for JPA transaction
10-06;00:11:33.102 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@2cf29dce]
10-06;00:11:33.106 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:11:33.106 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(1756099245<open>)]
10-06;00:11:33.106 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(1756099245<open>)] after transaction
10-06;00:11:33.107 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.saveAll]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:11:33.107 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(325641297<open>)] for JPA transaction
10-06;00:11:33.108 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@6ce365b7]
10-06;00:11:33.109 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:11:33.109 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(325641297<open>)]
10-06;00:11:33.115 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(325641297<open>)] after transaction
10-06;00:11:33.115 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.deleteAll]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:11:33.115 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(906718881<open>)] for JPA transaction
10-06;00:11:33.116 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@7aead157]
10-06;00:11:33.122 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:11:33.122 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(906718881<open>)]
10-06;00:11:33.124 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(906718881<open>)] after transaction
10-06;00:11:33.125 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [com.company.app.telegram.TelegramFacade.writeToTargetChat]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:11:33.125 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(2081129391<open>)] for JPA transaction
10-06;00:11:33.125 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@415cb259]
10-06;00:11:33.126 DEBUG [                          main][              c.c.a.t.d.s.HistoryService][]: try to write to telegram with chat name: [653606407] message: [Добавлено желание: артикль 13341986, цена 300]
10-06;00:11:33.135 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(2081129391<open>)] for JPA transaction
10-06;00:11:33.136 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:11:33.148 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating transaction failed - marking existing transaction as rollback-only
10-06;00:11:33.149 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Setting JPA transaction on EntityManager [SessionImpl(2081129391<open>)] rollback-only
10-06;00:11:33.150 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction rollback
10-06;00:11:33.151 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Rolling back JPA transaction on EntityManager [SessionImpl(2081129391<open>)]
10-06;00:11:33.151 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(2081129391<open>)] after transaction
10-06;00:11:33.179 INFO  [ SpringApplicationShutdownHook][j.LocalContainerEntityManagerFactoryBean][]: Closing JPA EntityManagerFactory for persistence unit 'default'
10-06;00:11:50.546 INFO  [                          main][.a.t.i.m.IncomingMessageTaskExecutorTest][]: Starting IncomingMessageTaskExecutorTest using Java 17.0.7 on user-VirtualBox with PID 5780 (started by user in /home/user/WORK/REPO/NO_WORK/TelegramNotificationService)
10-06;00:11:50.547 DEBUG [                          main][.a.t.i.m.IncomingMessageTaskExecutorTest][]: Running with Spring Boot v2.6.3, Spring v5.3.15
10-06;00:11:50.548 INFO  [                          main][.a.t.i.m.IncomingMessageTaskExecutorTest][]: No active profile set, falling back to default profiles: default
10-06;00:11:52.692 DEBUG [                          main][j.LocalContainerEntityManagerFactoryBean][]: Building JPA container EntityManagerFactory for persistence unit 'default'
10-06;00:11:53.460 INFO  [                          main][j.LocalContainerEntityManagerFactoryBean][]: Initialized JPA EntityManagerFactory for persistence unit 'default'
10-06;00:11:53.562 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:53.595 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:53.650 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:53.733 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:53.734 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:53.784 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:54.039 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:54.042 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:54.052 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:54.292 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:54.297 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:54.312 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:54.313 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:54.319 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:54.353 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:54.357 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:54.364 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:54.371 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:54.371 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:54.377 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:54.384 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:54.384 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:54.397 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:54.472 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:54.475 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:54.480 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:54.485 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:54.486 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:54.495 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:54.497 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:11:54.654 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [com.company.app.exchange_rate.component.ExchangeRateExtractor.extract]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:11:54.654 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(109683596<open>)] for JPA transaction
10-06;00:11:54.665 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@5d4587af]
10-06;00:11:54.683 DEBUG [                  scheduling-1][      c.c.a.c.a.l.p.PerformanceLogAspect][]: **********     created [com.company.app.core.aop.logging.performance.PerformanceLogAspect]     **********
10-06;00:11:54.687 DEBUG [                  scheduling-1][.a.c.a.l.p.c.PerformanceLogGuidExtractor][]: [6d8945d2-2fe8-407d-904c-9e8cbee71c65] выковыривание guid заняло [0] ms.
10-06;00:11:54.687 DEBUG [                  scheduling-1][      c.c.a.c.a.l.p.PerformanceLogAspect][]: [6d8945d2-2fe8-407d-904c-9e8cbee71c65]: запущен com.company.app.exchange_rate.component.ExchangeRateExtractor.extract
10-06;00:11:54.695 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(109683596<open>)] for JPA transaction
10-06;00:11:54.696 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:11:54.721 DEBUG [                  scheduling-1][      c.c.a.c.a.l.p.PerformanceLogAspect][]: [6d8945d2-2fe8-407d-904c-9e8cbee71c65]: за [34] ms выполнен com.company.app.exchange_rate.component.ExchangeRateExtractor.extract
10-06;00:11:54.721 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:11:54.722 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(109683596<open>)]
10-06;00:11:54.738 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(109683596<open>)] after transaction
10-06;00:11:54.739 DEBUG [                  scheduling-1][   c.c.a.e.s.ExchangeRateSchedulerConfig][]: exchange rate: ali: [105,83]
10-06;00:11:54.739 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [com.company.app.telegram.TelegramFacade.writeToEveryone]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:11:54.740 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(1527000567<open>)] for JPA transaction
10-06;00:11:54.740 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@5be84091]
10-06;00:11:54.753 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(1527000567<open>)] for JPA transaction
10-06;00:11:54.753 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:11:54.795 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:11:54.795 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(1527000567<open>)]
10-06;00:11:54.795 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(1527000567<open>)] after transaction
10-06;00:11:55.151 INFO  [                          main][         c.c.a.t.c.TelegramBotConfigImpl][]: **********     The telegram bot has been created.     **********
10-06;00:11:55.255 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [com.company.app.telegram.domain.initializer.Initializer.init]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:11:55.255 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(1852600891<open>)] for JPA transaction
10-06;00:11:55.257 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@66859669]
10-06;00:11:55.260 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(1852600891<open>)] for JPA transaction
10-06;00:11:55.260 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:11:55.286 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(1852600891<open>)] for JPA transaction
10-06;00:11:55.287 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:11:55.294 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(1852600891<open>)] for JPA transaction
10-06;00:11:55.295 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:11:55.296 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:11:55.296 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(1852600891<open>)]
10-06;00:11:55.300 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(1852600891<open>)] after transaction
10-06;00:11:55.304 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.saveAll]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:11:55.304 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(665261991<open>)] for JPA transaction
10-06;00:11:55.304 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@1d2b49b2]
10-06;00:11:55.305 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:11:55.305 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(665261991<open>)]
10-06;00:11:55.307 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(665261991<open>)] after transaction
10-06;00:11:55.309 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.saveAll]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:11:55.310 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(1677099294<open>)] for JPA transaction
10-06;00:11:55.310 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@5565d718]
10-06;00:11:55.311 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:11:55.311 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(1677099294<open>)]
10-06;00:11:55.312 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(1677099294<open>)] after transaction
10-06;00:11:55.315 INFO  [                          main][.a.t.i.m.IncomingMessageTaskExecutorTest][]: Started IncomingMessageTaskExecutorTest in 4.988 seconds (JVM running for 6.322)
10-06;00:11:55.343 INFO  [                          main][                       c.c.a.Application][]: *******************  The app has been started.  *******************
10-06;00:11:55.377 DEBUG [                          main][c.c.a.c.SpringBootTestApplicationContext][]: **********     run spring boot test context     **********
10-06;00:11:55.406 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findOne]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
10-06;00:11:55.407 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(1558011897<open>)] for JPA transaction
10-06;00:11:55.408 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@689504b1]
10-06;00:11:55.423 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:11:55.423 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(1558011897<open>)]
10-06;00:11:55.423 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(1558011897<open>)] after transaction
10-06;00:11:55.425 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:11:55.425 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(1915216881<open>)] for JPA transaction
10-06;00:11:55.425 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@245b009a]
10-06;00:11:55.427 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:11:55.427 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(1915216881<open>)]
10-06;00:11:55.428 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(1915216881<open>)] after transaction
10-06;00:11:55.429 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:11:55.429 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(971046435<open>)] for JPA transaction
10-06;00:11:55.429 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@44f86613]
10-06;00:11:55.430 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:11:55.430 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(971046435<open>)]
10-06;00:11:55.430 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(971046435<open>)] after transaction
10-06;00:13:12.591 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findAll]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
10-06;00:13:12.591 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(1747086169<open>)] for JPA transaction
10-06;00:13:12.592 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@3674164b]
10-06;00:13:12.600 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:13:12.600 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(1747086169<open>)]
10-06;00:13:12.600 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(1747086169<open>)] after transaction
10-06;00:13:28.423 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.saveAll]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:13:28.424 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(1610664551<open>)] for JPA transaction
10-06;00:13:28.424 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@27e25c2f]
10-06;00:13:28.425 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:13:28.425 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(1610664551<open>)]
10-06;00:13:28.426 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(1610664551<open>)] after transaction
10-06;00:13:34.844 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.deleteAll]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:13:34.845 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(892367717<open>)] for JPA transaction
10-06;00:13:34.845 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@15d04c41]
10-06;00:13:34.851 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:13:34.851 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(892367717<open>)]
10-06;00:13:34.853 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(892367717<open>)] after transaction
10-06;00:13:50.040 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [com.company.app.telegram.TelegramFacade.writeToTargetChat]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:13:50.041 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(473648609<open>)] for JPA transaction
10-06;00:13:50.041 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@1925b113]
10-06;00:13:50.043 DEBUG [                          main][              c.c.a.t.d.s.HistoryService][]: try to write to telegram with chat name: [653606407] message: [Добавлено желание: артикль 13341986, цена 300]
10-06;00:13:50.049 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(473648609<open>)] for JPA transaction
10-06;00:13:50.050 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:13:50.051 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating transaction failed - marking existing transaction as rollback-only
10-06;00:13:50.051 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Setting JPA transaction on EntityManager [SessionImpl(473648609<open>)] rollback-only
10-06;00:13:50.054 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction rollback
10-06;00:13:50.054 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Rolling back JPA transaction on EntityManager [SessionImpl(473648609<open>)]
10-06;00:13:50.055 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(473648609<open>)] after transaction
10-06;00:13:50.089 INFO  [ SpringApplicationShutdownHook][j.LocalContainerEntityManagerFactoryBean][]: Closing JPA EntityManagerFactory for persistence unit 'default'
10-06;00:15:22.863 INFO  [                          main][.a.t.i.m.IncomingMessageTaskExecutorTest][]: Starting IncomingMessageTaskExecutorTest using Java 17.0.7 on user-VirtualBox with PID 5905 (started by user in /home/user/WORK/REPO/NO_WORK/TelegramNotificationService)
10-06;00:15:22.864 DEBUG [                          main][.a.t.i.m.IncomingMessageTaskExecutorTest][]: Running with Spring Boot v2.6.3, Spring v5.3.15
10-06;00:15:22.865 INFO  [                          main][.a.t.i.m.IncomingMessageTaskExecutorTest][]: No active profile set, falling back to default profiles: default
10-06;00:15:24.456 DEBUG [                          main][j.LocalContainerEntityManagerFactoryBean][]: Building JPA container EntityManagerFactory for persistence unit 'default'
10-06;00:15:25.076 INFO  [                          main][j.LocalContainerEntityManagerFactoryBean][]: Initialized JPA EntityManagerFactory for persistence unit 'default'
10-06;00:15:25.143 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:15:25.165 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:15:25.218 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:15:25.243 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:15:25.244 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:15:25.264 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:15:25.473 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:15:25.476 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:15:25.482 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:15:25.679 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:15:25.684 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:15:25.694 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:15:25.695 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:15:25.725 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:15:25.772 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:15:25.773 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:15:25.779 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:15:25.784 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:15:25.785 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:15:25.795 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:15:25.801 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:15:25.801 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:15:25.811 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:15:25.825 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:15:25.830 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:15:25.835 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:15:25.838 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:15:25.843 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:15:25.848 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:15:25.850 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:15:25.938 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [com.company.app.exchange_rate.component.ExchangeRateExtractor.extract]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:15:25.940 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(1271132422<open>)] for JPA transaction
10-06;00:15:25.942 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@7eda64e8]
10-06;00:15:26.009 DEBUG [                  scheduling-1][      c.c.a.c.a.l.p.PerformanceLogAspect][]: **********     created [com.company.app.core.aop.logging.performance.PerformanceLogAspect]     **********
10-06;00:15:26.023 DEBUG [                  scheduling-1][.a.c.a.l.p.c.PerformanceLogGuidExtractor][]: [2f0cb7b5-ddda-4531-ad39-5a191a4b7bdc] выковыривание guid заняло [11] ms.
10-06;00:15:26.024 DEBUG [                  scheduling-1][      c.c.a.c.a.l.p.PerformanceLogAspect][]: [2f0cb7b5-ddda-4531-ad39-5a191a4b7bdc]: запущен com.company.app.exchange_rate.component.ExchangeRateExtractor.extract
10-06;00:15:26.032 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(1271132422<open>)] for JPA transaction
10-06;00:15:26.033 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:15:26.046 DEBUG [                  scheduling-1][      c.c.a.c.a.l.p.PerformanceLogAspect][]: [2f0cb7b5-ddda-4531-ad39-5a191a4b7bdc]: за [34] ms выполнен com.company.app.exchange_rate.component.ExchangeRateExtractor.extract
10-06;00:15:26.064 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:15:26.064 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(1271132422<open>)]
10-06;00:15:26.072 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(1271132422<open>)] after transaction
10-06;00:15:26.072 DEBUG [                  scheduling-1][   c.c.a.e.s.ExchangeRateSchedulerConfig][]: exchange rate: ali: [105,83]
10-06;00:15:26.072 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [com.company.app.telegram.TelegramFacade.writeToEveryone]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:15:26.072 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(1058672661<open>)] for JPA transaction
10-06;00:15:26.077 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@236e0fe5]
10-06;00:15:26.085 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(1058672661<open>)] for JPA transaction
10-06;00:15:26.085 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:15:26.095 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:15:26.095 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(1058672661<open>)]
10-06;00:15:26.096 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(1058672661<open>)] after transaction
10-06;00:15:26.443 INFO  [                          main][         c.c.a.t.c.TelegramBotConfigImpl][]: **********     The telegram bot has been created.     **********
10-06;00:15:26.549 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [com.company.app.telegram.domain.initializer.Initializer.init]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:15:26.549 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(1770925242<open>)] for JPA transaction
10-06;00:15:26.549 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@6cf47d05]
10-06;00:15:26.552 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(1770925242<open>)] for JPA transaction
10-06;00:15:26.552 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:15:26.584 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(1770925242<open>)] for JPA transaction
10-06;00:15:26.584 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:15:26.592 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(1770925242<open>)] for JPA transaction
10-06;00:15:26.592 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:15:26.593 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:15:26.594 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(1770925242<open>)]
10-06;00:15:26.620 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(1770925242<open>)] after transaction
10-06;00:15:26.623 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.saveAll]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:15:26.623 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(2059316944<open>)] for JPA transaction
10-06;00:15:26.623 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@490e1017]
10-06;00:15:26.624 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:15:26.624 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(2059316944<open>)]
10-06;00:15:26.625 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(2059316944<open>)] after transaction
10-06;00:15:26.628 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.saveAll]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:15:26.628 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(1210180003<open>)] for JPA transaction
10-06;00:15:26.628 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@5ba4735c]
10-06;00:15:26.629 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:15:26.629 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(1210180003<open>)]
10-06;00:15:26.630 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(1210180003<open>)] after transaction
10-06;00:15:26.633 INFO  [                          main][.a.t.i.m.IncomingMessageTaskExecutorTest][]: Started IncomingMessageTaskExecutorTest in 3.96 seconds (JVM running for 4.756)
10-06;00:15:26.641 INFO  [                          main][                       c.c.a.Application][]: *******************  The app has been started.  *******************
10-06;00:15:26.663 DEBUG [                          main][c.c.a.c.SpringBootTestApplicationContext][]: **********     run spring boot test context     **********
10-06;00:15:26.685 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findOne]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
10-06;00:15:26.686 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(339082934<open>)] for JPA transaction
10-06;00:15:26.687 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@5a349644]
10-06;00:15:26.732 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:15:26.732 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(339082934<open>)]
10-06;00:15:26.732 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(339082934<open>)] after transaction
10-06;00:15:26.734 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:15:26.734 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(432990189<open>)] for JPA transaction
10-06;00:15:26.734 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@4e8e0052]
10-06;00:15:26.735 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:15:26.735 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(432990189<open>)]
10-06;00:15:26.736 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(432990189<open>)] after transaction
10-06;00:15:26.736 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:15:26.736 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(1905282728<open>)] for JPA transaction
10-06;00:15:26.736 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@1d63c523]
10-06;00:15:26.737 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:15:26.737 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(1905282728<open>)]
10-06;00:15:26.738 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(1905282728<open>)] after transaction
10-06;00:15:26.739 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findAll]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
10-06;00:15:26.739 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(1799587714<open>)] for JPA transaction
10-06;00:15:26.739 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@68abf2ad]
10-06;00:15:26.760 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:15:26.760 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(1799587714<open>)]
10-06;00:15:26.760 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(1799587714<open>)] after transaction
10-06;00:15:26.761 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.saveAll]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:15:26.761 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(1867830167<open>)] for JPA transaction
10-06;00:15:26.761 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@1368e451]
10-06;00:15:26.762 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:15:26.762 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(1867830167<open>)]
10-06;00:15:26.763 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(1867830167<open>)] after transaction
10-06;00:15:26.763 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.deleteAll]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:15:26.764 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(870990714<open>)] for JPA transaction
10-06;00:15:26.764 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@360b6ea1]
10-06;00:15:26.768 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:15:26.768 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(870990714<open>)]
10-06;00:15:26.770 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(870990714<open>)] after transaction
10-06;00:15:26.771 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [com.company.app.telegram.TelegramFacade.writeToTargetChat]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:15:26.771 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(367553828<open>)] for JPA transaction
10-06;00:15:26.771 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@7c0b83af]
10-06;00:15:26.772 DEBUG [                          main][              c.c.a.t.d.s.HistoryService][]: try to write to telegram with chat name: [653606407] message: [Добавлено желание: артикль 13341986, цена 300]
10-06;00:15:26.775 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(367553828<open>)] for JPA transaction
10-06;00:15:26.775 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:15:26.776 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating transaction failed - marking existing transaction as rollback-only
10-06;00:15:26.776 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Setting JPA transaction on EntityManager [SessionImpl(367553828<open>)] rollback-only
10-06;00:15:26.778 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction rollback
10-06;00:15:26.778 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Rolling back JPA transaction on EntityManager [SessionImpl(367553828<open>)]
10-06;00:15:26.779 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(367553828<open>)] after transaction
10-06;00:15:26.807 INFO  [ SpringApplicationShutdownHook][j.LocalContainerEntityManagerFactoryBean][]: Closing JPA EntityManagerFactory for persistence unit 'default'
10-06;00:16:31.115 INFO  [                          main][.a.t.i.m.IncomingMessageTaskExecutorTest][]: Starting IncomingMessageTaskExecutorTest using Java 17.0.7 on user-VirtualBox with PID 6018 (started by user in /home/user/WORK/REPO/NO_WORK/TelegramNotificationService)
10-06;00:16:31.116 DEBUG [                          main][.a.t.i.m.IncomingMessageTaskExecutorTest][]: Running with Spring Boot v2.6.3, Spring v5.3.15
10-06;00:16:31.116 INFO  [                          main][.a.t.i.m.IncomingMessageTaskExecutorTest][]: No active profile set, falling back to default profiles: default
10-06;00:16:32.802 DEBUG [                          main][j.LocalContainerEntityManagerFactoryBean][]: Building JPA container EntityManagerFactory for persistence unit 'default'
10-06;00:16:33.450 INFO  [                          main][j.LocalContainerEntityManagerFactoryBean][]: Initialized JPA EntityManagerFactory for persistence unit 'default'
10-06;00:16:33.520 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:16:33.560 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:16:33.595 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:16:33.634 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:16:33.635 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:16:33.661 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:16:33.893 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:16:33.895 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:16:33.901 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:16:34.085 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:16:34.119 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:16:34.139 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:16:34.140 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:16:34.162 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:16:34.230 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:16:34.231 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:16:34.237 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:16:34.242 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:16:34.243 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:16:34.266 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:16:34.272 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:16:34.273 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:16:34.281 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:16:34.283 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:16:34.288 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:16:34.293 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:16:34.295 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:16:34.300 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:16:34.305 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:16:34.307 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:16:34.392 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [com.company.app.exchange_rate.component.ExchangeRateExtractor.extract]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:16:34.392 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(2134577351<open>)] for JPA transaction
10-06;00:16:34.403 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@65fc957]
10-06;00:16:34.436 DEBUG [                  scheduling-1][      c.c.a.c.a.l.p.PerformanceLogAspect][]: **********     created [com.company.app.core.aop.logging.performance.PerformanceLogAspect]     **********
10-06;00:16:34.439 DEBUG [                  scheduling-1][.a.c.a.l.p.c.PerformanceLogGuidExtractor][]: [de798ee6-fb2d-4f8c-aa5a-52ea908d4f89] выковыривание guid заняло [0] ms.
10-06;00:16:34.440 DEBUG [                  scheduling-1][      c.c.a.c.a.l.p.PerformanceLogAspect][]: [de798ee6-fb2d-4f8c-aa5a-52ea908d4f89]: запущен com.company.app.exchange_rate.component.ExchangeRateExtractor.extract
10-06;00:16:34.455 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(2134577351<open>)] for JPA transaction
10-06;00:16:34.455 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:16:34.470 DEBUG [                  scheduling-1][      c.c.a.c.a.l.p.PerformanceLogAspect][]: [de798ee6-fb2d-4f8c-aa5a-52ea908d4f89]: за [31] ms выполнен com.company.app.exchange_rate.component.ExchangeRateExtractor.extract
10-06;00:16:34.470 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:16:34.470 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(2134577351<open>)]
10-06;00:16:34.478 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(2134577351<open>)] after transaction
10-06;00:16:34.478 DEBUG [                  scheduling-1][   c.c.a.e.s.ExchangeRateSchedulerConfig][]: exchange rate: ali: [105,83]
10-06;00:16:34.478 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [com.company.app.telegram.TelegramFacade.writeToEveryone]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:16:34.478 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(1564218563<open>)] for JPA transaction
10-06;00:16:34.478 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@3a6962aa]
10-06;00:16:34.491 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(1564218563<open>)] for JPA transaction
10-06;00:16:34.491 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:16:34.503 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:16:34.503 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(1564218563<open>)]
10-06;00:16:34.504 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(1564218563<open>)] after transaction
10-06;00:16:34.875 INFO  [                          main][         c.c.a.t.c.TelegramBotConfigImpl][]: **********     The telegram bot has been created.     **********
10-06;00:16:34.976 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [com.company.app.telegram.domain.initializer.Initializer.init]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:16:34.976 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(1350099720<open>)] for JPA transaction
10-06;00:16:34.976 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@2045a469]
10-06;00:16:34.979 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(1350099720<open>)] for JPA transaction
10-06;00:16:34.979 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:16:35.001 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(1350099720<open>)] for JPA transaction
10-06;00:16:35.001 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:16:35.007 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(1350099720<open>)] for JPA transaction
10-06;00:16:35.007 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:16:35.009 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:16:35.009 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(1350099720<open>)]
10-06;00:16:35.012 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(1350099720<open>)] after transaction
10-06;00:16:35.015 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.saveAll]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:16:35.015 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(1925766776<open>)] for JPA transaction
10-06;00:16:35.015 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@22912968]
10-06;00:16:35.016 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:16:35.016 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(1925766776<open>)]
10-06;00:16:35.017 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(1925766776<open>)] after transaction
10-06;00:16:35.019 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.saveAll]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:16:35.020 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(654971199<open>)] for JPA transaction
10-06;00:16:35.020 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@3dc976da]
10-06;00:16:35.020 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:16:35.020 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(654971199<open>)]
10-06;00:16:35.021 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(654971199<open>)] after transaction
10-06;00:16:35.024 INFO  [                          main][.a.t.i.m.IncomingMessageTaskExecutorTest][]: Started IncomingMessageTaskExecutorTest in 4.058 seconds (JVM running for 4.776)
10-06;00:16:35.046 INFO  [                          main][                       c.c.a.Application][]: *******************  The app has been started.  *******************
10-06;00:16:35.078 DEBUG [                          main][c.c.a.c.SpringBootTestApplicationContext][]: **********     run spring boot test context     **********
10-06;00:16:35.097 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findOne]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
10-06;00:16:35.098 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(61569807<open>)] for JPA transaction
10-06;00:16:35.099 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@34fe89a5]
10-06;00:16:35.111 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:16:35.111 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(61569807<open>)]
10-06;00:16:35.111 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(61569807<open>)] after transaction
10-06;00:16:35.112 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:16:35.112 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(210282562<open>)] for JPA transaction
10-06;00:16:35.112 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@d436e51]
10-06;00:16:35.113 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:16:35.113 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(210282562<open>)]
10-06;00:16:35.114 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(210282562<open>)] after transaction
10-06;00:16:35.114 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:16:35.114 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(1317929042<open>)] for JPA transaction
10-06;00:16:35.114 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@5a2ce458]
10-06;00:16:35.115 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:16:35.115 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(1317929042<open>)]
10-06;00:16:35.115 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(1317929042<open>)] after transaction
10-06;00:16:35.116 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [null]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:16:35.116 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(222205481<open>)] for JPA transaction
10-06;00:16:35.116 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@65c97eeb]
10-06;00:16:35.117 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(222205481<open>)] for JPA transaction
10-06;00:16:35.117 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:16:35.121 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(222205481<open>)] for JPA transaction
10-06;00:16:35.121 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:16:35.122 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(222205481<open>)] for JPA transaction
10-06;00:16:35.122 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:16:35.124 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(222205481<open>)] for JPA transaction
10-06;00:16:35.124 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:16:35.124 DEBUG [                          main][              c.c.a.t.d.s.HistoryService][]: try to write to telegram with chat name: [653606407] message: [Добавлено желание: артикль 13341986, цена 300]
10-06;00:16:35.128 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(222205481<open>)] for JPA transaction
10-06;00:16:35.128 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:16:35.129 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating transaction failed - marking existing transaction as rollback-only
10-06;00:16:35.129 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Setting JPA transaction on EntityManager [SessionImpl(222205481<open>)] rollback-only
10-06;00:16:35.131 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating transaction failed - marking existing transaction as rollback-only
10-06;00:16:35.131 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Setting JPA transaction on EntityManager [SessionImpl(222205481<open>)] rollback-only
10-06;00:16:35.132 DEBUG [                          main][             o.s.t.s.TransactionTemplate][]: Initiating transaction rollback on application exception
org.springframework.dao.DataIntegrityViolationException: not-null property references a null or transient value : com.company.app.telegram.domain.entity.Chat.mode; nested exception is org.hibernate.PropertyValueException: not-null property references a null or transient value : com.company.app.telegram.domain.entity.Chat.mode
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:294)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:551)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:174)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at jdk.proxy2/jdk.proxy2.$Proxy164.save(Unknown Source)
	at com.company.app.telegram.domain.repository.ChatRepository.findChatByChatNameOrCreateIfNotExist(ChatRepository.java:21)
	at java.base/java.lang.invoke.MethodHandle.invokeWithArguments(MethodHandle.java:732)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:86)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:174)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at jdk.proxy2/jdk.proxy2.$Proxy164.findChatByChatNameOrCreateIfNotExist(Unknown Source)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.mockito.internal.util.reflection.ReflectionMemberAccessor.invoke(ReflectionMemberAccessor.java:48)
	at org.mockito.internal.stubbing.defaultanswers.ForwardsInvocations.answer(ForwardsInvocations.java:49)
	at org.mockito.internal.handler.MockHandlerImpl.handle(MockHandlerImpl.java:110)
	at org.mockito.internal.handler.NullResultGuardian.handle(NullResultGuardian.java:29)
	at org.mockito.internal.handler.InvocationNotifierHandler.handle(InvocationNotifierHandler.java:34)
	at org.mockito.internal.creation.bytebuddy.MockMethodInterceptor.doIntercept(MockMethodInterceptor.java:82)
	at org.mockito.internal.creation.bytebuddy.MockMethodInterceptor.doIntercept(MockMethodInterceptor.java:56)
	at org.mockito.internal.creation.bytebuddy.MockMethodInterceptor$DispatcherDefaultingToRealMethod.interceptSuperCallable(MockMethodInterceptor.java:145)
	at com.company.app.telegram.domain.repository.ChatRepository$MockitoMock$1330123840.findChatByChatNameOrCreateIfNotExist(Unknown Source)
	at com.company.app.telegram.domain.service.HistoryService.saveHistory(HistoryService.java:46)
	at com.company.app.telegram.config.OutgoingMessageHandler.sendOneMessage(OutgoingMessageHandler.java:37)
	at com.company.app.telegram.config.OutgoingMessageHandler.sendToTargetChat(OutgoingMessageHandler.java:33)
	at com.company.app.telegram.TelegramFacade.writeToTargetChat(TelegramFacade.java:24)
	at com.company.app.telegram.TelegramFacade$$FastClassBySpringCGLIB$$9881a4fd.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:783)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:698)
	at com.company.app.telegram.TelegramFacade$$EnhancerBySpringCGLIB$$ab2776c1.writeToTargetChat(<generated>)
	at com.company.app.telegram.incoming_message_handler.message_executor.IncomingMessageTaskExecutor.lambda$processIncomingMessageTask$0(IncomingMessageTaskExecutor.java:49)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at com.company.app.telegram.incoming_message_handler.message_executor.IncomingMessageTaskExecutor.processIncomingMessageTask(IncomingMessageTaskExecutor.java:48)
	at com.company.app.telegram.incoming_message_handler.message_executor.IncomingMessageTaskExecutorTest$1.accept(IncomingMessageTaskExecutorTest.java:44)
	at com.company.app.telegram.incoming_message_handler.message_executor.IncomingMessageTaskExecutorTest$1.accept(IncomingMessageTaskExecutorTest.java:41)
	at org.springframework.transaction.support.TransactionOperations.lambda$executeWithoutResult$0(TransactionOperations.java:68)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at org.springframework.transaction.support.TransactionTemplate$MockitoMock$1155313969.execute$accessor$ZQojn1oL(Unknown Source)
	at org.springframework.transaction.support.TransactionTemplate$MockitoMock$1155313969$auxiliary$XjEsXcac.call(Unknown Source)
	at org.mockito.internal.invocation.RealMethod$FromCallable$1.call(RealMethod.java:40)
	at org.mockito.internal.invocation.RealMethod$FromBehavior.invoke(RealMethod.java:62)
	at org.mockito.internal.invocation.InterceptedInvocation.callRealMethod(InterceptedInvocation.java:142)
	at org.mockito.internal.stubbing.answers.CallsRealMethods.answer(CallsRealMethods.java:45)
	at org.mockito.Answers.answer(Answers.java:90)
	at org.mockito.internal.handler.MockHandlerImpl.handle(MockHandlerImpl.java:110)
	at org.mockito.internal.handler.NullResultGuardian.handle(NullResultGuardian.java:29)
	at org.mockito.internal.handler.InvocationNotifierHandler.handle(InvocationNotifierHandler.java:34)
	at org.mockito.internal.creation.bytebuddy.MockMethodInterceptor.doIntercept(MockMethodInterceptor.java:82)
	at org.mockito.internal.creation.bytebuddy.MockMethodInterceptor.doIntercept(MockMethodInterceptor.java:56)
	at org.mockito.internal.creation.bytebuddy.MockMethodInterceptor$DispatcherDefaultingToRealMethod.interceptSuperCallable(MockMethodInterceptor.java:145)
	at org.springframework.transaction.support.TransactionTemplate$MockitoMock$1155313969.execute(Unknown Source)
	at org.springframework.transaction.support.TransactionOperations.executeWithoutResult(TransactionOperations.java:67)
	at org.springframework.transaction.support.TransactionTemplate$MockitoMock$1155313969.executeWithoutResult$accessor$ZQojn1oL(Unknown Source)
	at org.springframework.transaction.support.TransactionTemplate$MockitoMock$1155313969$auxiliary$rK8lUGu4.call(Unknown Source)
	at org.mockito.internal.invocation.RealMethod$FromCallable$1.call(RealMethod.java:40)
	at org.mockito.internal.invocation.RealMethod$FromBehavior.invoke(RealMethod.java:62)
	at org.mockito.internal.invocation.InterceptedInvocation.callRealMethod(InterceptedInvocation.java:142)
	at org.mockito.internal.stubbing.answers.CallsRealMethods.answer(CallsRealMethods.java:45)
	at org.mockito.Answers.answer(Answers.java:90)
	at org.mockito.internal.handler.MockHandlerImpl.handle(MockHandlerImpl.java:110)
	at org.mockito.internal.handler.NullResultGuardian.handle(NullResultGuardian.java:29)
	at org.mockito.internal.handler.InvocationNotifierHandler.handle(InvocationNotifierHandler.java:34)
	at org.mockito.internal.creation.bytebuddy.MockMethodInterceptor.doIntercept(MockMethodInterceptor.java:82)
	at org.mockito.internal.creation.bytebuddy.MockMethodInterceptor.doIntercept(MockMethodInterceptor.java:56)
	at org.mockito.internal.creation.bytebuddy.MockMethodInterceptor$DispatcherDefaultingToRealMethod.interceptSuperCallable(MockMethodInterceptor.java:145)
	at org.springframework.transaction.support.TransactionTemplate$MockitoMock$1155313969.executeWithoutResult(Unknown Source)
	at com.company.app.telegram.incoming_message_handler.message_executor.IncomingMessageTaskExecutorTest.success_test(IncomingMessageTaskExecutorTest.java:41)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:725)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:140)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:84)
	at org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115)
	at org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104)
	at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:98)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:214)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:210)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:135)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:66)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53)
	at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)
	at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:232)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)
Caused by: org.hibernate.PropertyValueException: not-null property references a null or transient value : com.company.app.telegram.domain.entity.Chat.mode
	at org.hibernate.engine.internal.Nullability.checkNullability(Nullability.java:111)
	at org.hibernate.engine.internal.Nullability.checkNullability(Nullability.java:55)
	at org.hibernate.action.internal.AbstractEntityInsertAction.nullifyTransientReferencesIfNotAlready(AbstractEntityInsertAction.java:116)
	at org.hibernate.action.internal.AbstractEntityInsertAction.makeEntityManaged(AbstractEntityInsertAction.java:125)
	at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:289)
	at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:263)
	at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:250)
	at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:338)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:287)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:193)
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:135)
	at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:185)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:128)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:55)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)
	at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:760)
	at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:746)
	at jdk.internal.reflect.GeneratedMethodAccessor86.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:311)
	at jdk.proxy2/jdk.proxy2.$Proxy159.persist(Unknown Source)
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:630)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:289)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:121)
	at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:529)
	at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:285)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:639)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:163)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:138)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:80)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 158 common frames omitted
10-06;00:16:35.133 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction rollback
10-06;00:16:35.133 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Rolling back JPA transaction on EntityManager [SessionImpl(222205481<open>)]
10-06;00:16:35.134 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(222205481<open>)] after transaction
10-06;00:16:35.173 INFO  [ SpringApplicationShutdownHook][j.LocalContainerEntityManagerFactoryBean][]: Closing JPA EntityManagerFactory for persistence unit 'default'
10-06;00:17:08.246 INFO  [                          main][.a.t.i.m.IncomingMessageTaskExecutorTest][]: Starting IncomingMessageTaskExecutorTest using Java 17.0.7 on user-VirtualBox with PID 6150 (started by user in /home/user/WORK/REPO/NO_WORK/TelegramNotificationService)
10-06;00:17:08.248 DEBUG [                          main][.a.t.i.m.IncomingMessageTaskExecutorTest][]: Running with Spring Boot v2.6.3, Spring v5.3.15
10-06;00:17:08.248 INFO  [                          main][.a.t.i.m.IncomingMessageTaskExecutorTest][]: No active profile set, falling back to default profiles: default
10-06;00:17:10.049 DEBUG [                          main][j.LocalContainerEntityManagerFactoryBean][]: Building JPA container EntityManagerFactory for persistence unit 'default'
10-06;00:17:10.787 INFO  [                          main][j.LocalContainerEntityManagerFactoryBean][]: Initialized JPA EntityManagerFactory for persistence unit 'default'
10-06;00:17:10.865 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:17:10.916 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:17:10.959 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:17:10.999 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:17:10.999 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:17:11.039 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:17:11.311 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:17:11.314 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:17:11.323 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:17:11.549 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:17:11.550 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:17:11.562 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:17:11.567 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:17:11.582 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:17:11.661 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:17:11.662 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:17:11.669 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:17:11.675 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:17:11.676 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:17:11.688 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:17:11.690 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:17:11.698 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:17:11.705 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:17:11.707 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:17:11.715 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:17:11.721 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:17:11.724 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:17:11.755 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:17:11.755 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:17:11.763 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:17:11.885 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [com.company.app.exchange_rate.component.ExchangeRateExtractor.extract]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:17:11.886 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(598724002<open>)] for JPA transaction
10-06;00:17:11.888 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@582e55f0]
10-06;00:17:11.902 DEBUG [                  scheduling-1][      c.c.a.c.a.l.p.PerformanceLogAspect][]: **********     created [com.company.app.core.aop.logging.performance.PerformanceLogAspect]     **********
10-06;00:17:11.906 DEBUG [                  scheduling-1][.a.c.a.l.p.c.PerformanceLogGuidExtractor][]: [41dd3444-855f-48ac-bd74-e30664cf2763] выковыривание guid заняло [0] ms.
10-06;00:17:11.907 DEBUG [                  scheduling-1][      c.c.a.c.a.l.p.PerformanceLogAspect][]: [41dd3444-855f-48ac-bd74-e30664cf2763]: запущен com.company.app.exchange_rate.component.ExchangeRateExtractor.extract
10-06;00:17:11.916 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(598724002<open>)] for JPA transaction
10-06;00:17:11.916 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:17:11.931 DEBUG [                  scheduling-1][      c.c.a.c.a.l.p.PerformanceLogAspect][]: [41dd3444-855f-48ac-bd74-e30664cf2763]: за [26] ms выполнен com.company.app.exchange_rate.component.ExchangeRateExtractor.extract
10-06;00:17:11.932 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:17:11.932 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(598724002<open>)]
10-06;00:17:11.942 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(598724002<open>)] after transaction
10-06;00:17:11.943 DEBUG [                  scheduling-1][   c.c.a.e.s.ExchangeRateSchedulerConfig][]: exchange rate: ali: [105,83]
10-06;00:17:11.943 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [com.company.app.telegram.TelegramFacade.writeToEveryone]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:17:11.943 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(180234603<open>)] for JPA transaction
10-06;00:17:11.943 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@4ef3c35d]
10-06;00:17:11.956 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(180234603<open>)] for JPA transaction
10-06;00:17:11.957 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:17:11.976 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:17:11.977 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(180234603<open>)]
10-06;00:17:11.977 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(180234603<open>)] after transaction
10-06;00:17:12.594 INFO  [                          main][         c.c.a.t.c.TelegramBotConfigImpl][]: **********     The telegram bot has been created.     **********
10-06;00:17:12.702 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [com.company.app.telegram.domain.initializer.Initializer.init]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:17:12.702 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(1026584533<open>)] for JPA transaction
10-06;00:17:12.702 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@4ba56bbe]
10-06;00:17:12.705 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(1026584533<open>)] for JPA transaction
10-06;00:17:12.706 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:17:12.733 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(1026584533<open>)] for JPA transaction
10-06;00:17:12.733 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:17:12.742 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(1026584533<open>)] for JPA transaction
10-06;00:17:12.742 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:17:12.745 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:17:12.745 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(1026584533<open>)]
10-06;00:17:12.749 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(1026584533<open>)] after transaction
10-06;00:17:12.752 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.saveAll]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:17:12.753 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(1107296920<open>)] for JPA transaction
10-06;00:17:12.753 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@4df9df06]
10-06;00:17:12.755 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:17:12.755 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(1107296920<open>)]
10-06;00:17:12.756 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(1107296920<open>)] after transaction
10-06;00:17:12.777 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.saveAll]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:17:12.777 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(1199934844<open>)] for JPA transaction
10-06;00:17:12.778 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@5a5cd0af]
10-06;00:17:12.779 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:17:12.779 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(1199934844<open>)]
10-06;00:17:12.780 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(1199934844<open>)] after transaction
10-06;00:17:12.783 INFO  [                          main][.a.t.i.m.IncomingMessageTaskExecutorTest][]: Started IncomingMessageTaskExecutorTest in 4.758 seconds (JVM running for 5.738)
10-06;00:17:12.796 INFO  [                          main][                       c.c.a.Application][]: *******************  The app has been started.  *******************
10-06;00:17:12.859 DEBUG [                          main][c.c.a.c.SpringBootTestApplicationContext][]: **********     run spring boot test context     **********
10-06;00:17:12.904 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findOne]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
10-06;00:17:12.905 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(1693799984<open>)] for JPA transaction
10-06;00:17:12.906 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@49825659]
10-06;00:17:12.922 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:17:12.923 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(1693799984<open>)]
10-06;00:17:12.923 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(1693799984<open>)] after transaction
10-06;00:17:12.925 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:17:12.925 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(1753822100<open>)] for JPA transaction
10-06;00:17:12.925 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@3a89f2a0]
10-06;00:17:12.926 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:17:12.926 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(1753822100<open>)]
10-06;00:17:12.927 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(1753822100<open>)] after transaction
10-06;00:17:12.927 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:17:12.928 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(992391100<open>)] for JPA transaction
10-06;00:17:12.928 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@2ab91b65]
10-06;00:17:12.928 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:17:12.928 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(992391100<open>)]
10-06;00:17:12.929 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(992391100<open>)] after transaction
10-06;00:17:15.741 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [null]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:17:15.741 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(1157129747<open>)] for JPA transaction
10-06;00:17:15.741 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@5e05dd42]
10-06;00:18:07.112 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(1157129747<open>)] for JPA transaction
10-06;00:18:07.112 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:18:07.125 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(1157129747<open>)] for JPA transaction
10-06;00:18:07.125 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:18:07.126 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(1157129747<open>)] for JPA transaction
10-06;00:18:07.126 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:18:07.130 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(1157129747<open>)] for JPA transaction
10-06;00:18:07.130 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:18:07.130 DEBUG [                          main][              c.c.a.t.d.s.HistoryService][]: try to write to telegram with chat name: [653606407] message: [Добавлено желание: артикль 13341986, цена 300]
10-06;00:18:07.144 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(1157129747<open>)] for JPA transaction
10-06;00:18:07.144 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:18:07.145 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating transaction failed - marking existing transaction as rollback-only
10-06;00:18:07.145 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Setting JPA transaction on EntityManager [SessionImpl(1157129747<open>)] rollback-only
10-06;00:18:07.147 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating transaction failed - marking existing transaction as rollback-only
10-06;00:18:07.147 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Setting JPA transaction on EntityManager [SessionImpl(1157129747<open>)] rollback-only
10-06;00:18:07.148 DEBUG [                          main][             o.s.t.s.TransactionTemplate][]: Initiating transaction rollback on application exception
org.springframework.dao.DataIntegrityViolationException: not-null property references a null or transient value : com.company.app.telegram.domain.entity.Chat.mode; nested exception is org.hibernate.PropertyValueException: not-null property references a null or transient value : com.company.app.telegram.domain.entity.Chat.mode
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:294)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:551)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:174)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at jdk.proxy2/jdk.proxy2.$Proxy164.save(Unknown Source)
	at com.company.app.telegram.domain.repository.ChatRepository.findChatByChatNameOrCreateIfNotExist(ChatRepository.java:21)
	at java.base/java.lang.invoke.MethodHandle.invokeWithArguments(MethodHandle.java:732)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:86)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:174)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at jdk.proxy2/jdk.proxy2.$Proxy164.findChatByChatNameOrCreateIfNotExist(Unknown Source)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.mockito.internal.util.reflection.ReflectionMemberAccessor.invoke(ReflectionMemberAccessor.java:48)
	at org.mockito.internal.stubbing.defaultanswers.ForwardsInvocations.answer(ForwardsInvocations.java:49)
	at org.mockito.internal.handler.MockHandlerImpl.handle(MockHandlerImpl.java:110)
	at org.mockito.internal.handler.NullResultGuardian.handle(NullResultGuardian.java:29)
	at org.mockito.internal.handler.InvocationNotifierHandler.handle(InvocationNotifierHandler.java:34)
	at org.mockito.internal.creation.bytebuddy.MockMethodInterceptor.doIntercept(MockMethodInterceptor.java:82)
	at org.mockito.internal.creation.bytebuddy.MockMethodInterceptor.doIntercept(MockMethodInterceptor.java:56)
	at org.mockito.internal.creation.bytebuddy.MockMethodInterceptor$DispatcherDefaultingToRealMethod.interceptSuperCallable(MockMethodInterceptor.java:145)
	at com.company.app.telegram.domain.repository.ChatRepository$MockitoMock$456011930.findChatByChatNameOrCreateIfNotExist(Unknown Source)
	at com.company.app.telegram.domain.service.HistoryService.saveHistory(HistoryService.java:46)
	at com.company.app.telegram.config.OutgoingMessageHandler.sendOneMessage(OutgoingMessageHandler.java:37)
	at com.company.app.telegram.config.OutgoingMessageHandler.sendToTargetChat(OutgoingMessageHandler.java:33)
	at com.company.app.telegram.TelegramFacade.writeToTargetChat(TelegramFacade.java:24)
	at com.company.app.telegram.TelegramFacade$$FastClassBySpringCGLIB$$9881a4fd.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:783)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:698)
	at com.company.app.telegram.TelegramFacade$$EnhancerBySpringCGLIB$$ba5b5b30.writeToTargetChat(<generated>)
	at com.company.app.telegram.incoming_message_handler.message_executor.IncomingMessageTaskExecutor.lambda$processIncomingMessageTask$0(IncomingMessageTaskExecutor.java:49)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at com.company.app.telegram.incoming_message_handler.message_executor.IncomingMessageTaskExecutor.processIncomingMessageTask(IncomingMessageTaskExecutor.java:48)
	at com.company.app.telegram.incoming_message_handler.message_executor.IncomingMessageTaskExecutorTest.lambda$success_test$0(IncomingMessageTaskExecutorTest.java:39)
	at org.springframework.transaction.support.TransactionOperations.lambda$executeWithoutResult$0(TransactionOperations.java:68)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at org.springframework.transaction.support.TransactionTemplate$MockitoMock$1698543307.execute$accessor$LR5Van7H(Unknown Source)
	at org.springframework.transaction.support.TransactionTemplate$MockitoMock$1698543307$auxiliary$0jwz0ULi.call(Unknown Source)
	at org.mockito.internal.invocation.RealMethod$FromCallable$1.call(RealMethod.java:40)
	at org.mockito.internal.invocation.RealMethod$FromBehavior.invoke(RealMethod.java:62)
	at org.mockito.internal.invocation.InterceptedInvocation.callRealMethod(InterceptedInvocation.java:142)
	at org.mockito.internal.stubbing.answers.CallsRealMethods.answer(CallsRealMethods.java:45)
	at org.mockito.Answers.answer(Answers.java:90)
	at org.mockito.internal.handler.MockHandlerImpl.handle(MockHandlerImpl.java:110)
	at org.mockito.internal.handler.NullResultGuardian.handle(NullResultGuardian.java:29)
	at org.mockito.internal.handler.InvocationNotifierHandler.handle(InvocationNotifierHandler.java:34)
	at org.mockito.internal.creation.bytebuddy.MockMethodInterceptor.doIntercept(MockMethodInterceptor.java:82)
	at org.mockito.internal.creation.bytebuddy.MockMethodInterceptor.doIntercept(MockMethodInterceptor.java:56)
	at org.mockito.internal.creation.bytebuddy.MockMethodInterceptor$DispatcherDefaultingToRealMethod.interceptSuperCallable(MockMethodInterceptor.java:145)
	at org.springframework.transaction.support.TransactionTemplate$MockitoMock$1698543307.execute(Unknown Source)
	at org.springframework.transaction.support.TransactionOperations.executeWithoutResult(TransactionOperations.java:67)
	at org.springframework.transaction.support.TransactionTemplate$MockitoMock$1698543307.executeWithoutResult$accessor$LR5Van7H(Unknown Source)
	at org.springframework.transaction.support.TransactionTemplate$MockitoMock$1698543307$auxiliary$sJartRYj.call(Unknown Source)
	at org.mockito.internal.invocation.RealMethod$FromCallable$1.call(RealMethod.java:40)
	at org.mockito.internal.invocation.RealMethod$FromBehavior.invoke(RealMethod.java:62)
	at org.mockito.internal.invocation.InterceptedInvocation.callRealMethod(InterceptedInvocation.java:142)
	at org.mockito.internal.stubbing.answers.CallsRealMethods.answer(CallsRealMethods.java:45)
	at org.mockito.Answers.answer(Answers.java:90)
	at org.mockito.internal.handler.MockHandlerImpl.handle(MockHandlerImpl.java:110)
	at org.mockito.internal.handler.NullResultGuardian.handle(NullResultGuardian.java:29)
	at org.mockito.internal.handler.InvocationNotifierHandler.handle(InvocationNotifierHandler.java:34)
	at org.mockito.internal.creation.bytebuddy.MockMethodInterceptor.doIntercept(MockMethodInterceptor.java:82)
	at org.mockito.internal.creation.bytebuddy.MockMethodInterceptor.doIntercept(MockMethodInterceptor.java:56)
	at org.mockito.internal.creation.bytebuddy.MockMethodInterceptor$DispatcherDefaultingToRealMethod.interceptSuperCallable(MockMethodInterceptor.java:145)
	at org.springframework.transaction.support.TransactionTemplate$MockitoMock$1698543307.executeWithoutResult(Unknown Source)
	at com.company.app.telegram.incoming_message_handler.message_executor.IncomingMessageTaskExecutorTest.success_test(IncomingMessageTaskExecutorTest.java:38)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:725)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:140)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:84)
	at org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115)
	at org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104)
	at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:98)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:214)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:210)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:135)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:66)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53)
	at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)
	at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:232)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)
Caused by: org.hibernate.PropertyValueException: not-null property references a null or transient value : com.company.app.telegram.domain.entity.Chat.mode
	at org.hibernate.engine.internal.Nullability.checkNullability(Nullability.java:111)
	at org.hibernate.engine.internal.Nullability.checkNullability(Nullability.java:55)
	at org.hibernate.action.internal.AbstractEntityInsertAction.nullifyTransientReferencesIfNotAlready(AbstractEntityInsertAction.java:116)
	at org.hibernate.action.internal.AbstractEntityInsertAction.makeEntityManaged(AbstractEntityInsertAction.java:125)
	at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:289)
	at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:263)
	at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:250)
	at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:338)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:287)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:193)
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:135)
	at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:185)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:128)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:55)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)
	at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:760)
	at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:746)
	at jdk.internal.reflect.GeneratedMethodAccessor86.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:311)
	at jdk.proxy2/jdk.proxy2.$Proxy159.persist(Unknown Source)
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:630)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:289)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:121)
	at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:529)
	at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:285)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:639)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:163)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:138)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:80)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 157 common frames omitted
10-06;00:18:07.149 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction rollback
10-06;00:18:07.149 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Rolling back JPA transaction on EntityManager [SessionImpl(1157129747<open>)]
10-06;00:18:07.150 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(1157129747<open>)] after transaction
10-06;00:18:07.242 INFO  [ SpringApplicationShutdownHook][j.LocalContainerEntityManagerFactoryBean][]: Closing JPA EntityManagerFactory for persistence unit 'default'
10-06;00:18:50.339 INFO  [                          main][.a.t.i.m.IncomingMessageTaskExecutorTest][]: Starting IncomingMessageTaskExecutorTest using Java 17.0.7 on user-VirtualBox with PID 6337 (started by user in /home/user/WORK/REPO/NO_WORK/TelegramNotificationService)
10-06;00:18:50.340 DEBUG [                          main][.a.t.i.m.IncomingMessageTaskExecutorTest][]: Running with Spring Boot v2.6.3, Spring v5.3.15
10-06;00:18:50.340 INFO  [                          main][.a.t.i.m.IncomingMessageTaskExecutorTest][]: No active profile set, falling back to default profiles: default
10-06;00:18:51.902 DEBUG [                          main][j.LocalContainerEntityManagerFactoryBean][]: Building JPA container EntityManagerFactory for persistence unit 'default'
10-06;00:18:52.503 INFO  [                          main][j.LocalContainerEntityManagerFactoryBean][]: Initialized JPA EntityManagerFactory for persistence unit 'default'
10-06;00:18:52.598 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:18:52.623 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:18:52.686 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:18:52.718 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:18:52.719 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:18:52.742 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:18:52.956 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:18:52.959 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:18:52.965 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:18:53.165 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:18:53.168 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:18:53.177 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:18:53.198 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:18:53.204 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:18:53.210 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:18:53.210 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:18:53.215 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:18:53.221 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:18:53.225 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:18:53.249 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:18:53.250 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:18:53.260 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:18:53.319 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:18:53.321 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:18:53.327 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:18:53.333 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:18:53.334 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:18:53.339 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:18:53.345 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:18:53.345 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:18:53.478 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [com.company.app.exchange_rate.component.ExchangeRateExtractor.extract]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:18:53.481 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(2134577351<open>)] for JPA transaction
10-06;00:18:53.487 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@65fc957]
10-06;00:18:53.505 DEBUG [                  scheduling-1][      c.c.a.c.a.l.p.PerformanceLogAspect][]: **********     created [com.company.app.core.aop.logging.performance.PerformanceLogAspect]     **********
10-06;00:18:53.509 DEBUG [                  scheduling-1][.a.c.a.l.p.c.PerformanceLogGuidExtractor][]: [ada43ad6-f0c7-43e9-8953-9892bef97318] выковыривание guid заняло [0] ms.
10-06;00:18:53.509 DEBUG [                  scheduling-1][      c.c.a.c.a.l.p.PerformanceLogAspect][]: [ada43ad6-f0c7-43e9-8953-9892bef97318]: запущен com.company.app.exchange_rate.component.ExchangeRateExtractor.extract
10-06;00:18:53.518 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(2134577351<open>)] for JPA transaction
10-06;00:18:53.518 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:18:53.538 DEBUG [                  scheduling-1][      c.c.a.c.a.l.p.PerformanceLogAspect][]: [ada43ad6-f0c7-43e9-8953-9892bef97318]: за [30] ms выполнен com.company.app.exchange_rate.component.ExchangeRateExtractor.extract
10-06;00:18:53.539 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:18:53.539 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(2134577351<open>)]
10-06;00:18:53.546 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(2134577351<open>)] after transaction
10-06;00:18:53.547 DEBUG [                  scheduling-1][   c.c.a.e.s.ExchangeRateSchedulerConfig][]: exchange rate: ali: [105,83]
10-06;00:18:53.547 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [com.company.app.telegram.TelegramFacade.writeToEveryone]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:18:53.547 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(1564218563<open>)] for JPA transaction
10-06;00:18:53.547 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@3a6962aa]
10-06;00:18:53.553 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(1564218563<open>)] for JPA transaction
10-06;00:18:53.554 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:18:53.564 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:18:53.564 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(1564218563<open>)]
10-06;00:18:53.564 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(1564218563<open>)] after transaction
10-06;00:18:53.962 INFO  [                          main][         c.c.a.t.c.TelegramBotConfigImpl][]: **********     The telegram bot has been created.     **********
10-06;00:18:54.059 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [com.company.app.telegram.domain.initializer.Initializer.init]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:18:54.059 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(568148058<open>)] for JPA transaction
10-06;00:18:54.059 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@31d11998]
10-06;00:18:54.063 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(568148058<open>)] for JPA transaction
10-06;00:18:54.064 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:18:54.092 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(568148058<open>)] for JPA transaction
10-06;00:18:54.092 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:18:54.099 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(568148058<open>)] for JPA transaction
10-06;00:18:54.099 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:18:54.100 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:18:54.100 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(568148058<open>)]
10-06;00:18:54.104 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(568148058<open>)] after transaction
10-06;00:18:54.108 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.saveAll]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:18:54.108 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(7530502<open>)] for JPA transaction
10-06;00:18:54.108 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@270a113f]
10-06;00:18:54.110 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:18:54.110 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(7530502<open>)]
10-06;00:18:54.111 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(7530502<open>)] after transaction
10-06;00:18:54.113 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.saveAll]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:18:54.114 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(1821075330<open>)] for JPA transaction
10-06;00:18:54.114 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@4ceac22d]
10-06;00:18:54.115 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:18:54.115 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(1821075330<open>)]
10-06;00:18:54.115 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(1821075330<open>)] after transaction
10-06;00:18:54.118 INFO  [                          main][.a.t.i.m.IncomingMessageTaskExecutorTest][]: Started IncomingMessageTaskExecutorTest in 3.947 seconds (JVM running for 4.824)
10-06;00:18:54.153 INFO  [                          main][                       c.c.a.Application][]: *******************  The app has been started.  *******************
10-06;00:18:54.168 DEBUG [                          main][c.c.a.c.SpringBootTestApplicationContext][]: **********     run spring boot test context     **********
10-06;00:18:54.213 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findOne]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
10-06;00:18:54.214 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(1946557677<open>)] for JPA transaction
10-06;00:18:54.215 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@78fc5eb]
10-06;00:18:54.228 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:18:54.228 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(1946557677<open>)]
10-06;00:18:54.228 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(1946557677<open>)] after transaction
10-06;00:18:54.230 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:18:54.230 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(175186756<open>)] for JPA transaction
10-06;00:18:54.230 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@6da53709]
10-06;00:18:54.231 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:18:54.231 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(175186756<open>)]
10-06;00:18:54.232 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(175186756<open>)] after transaction
10-06;00:18:54.232 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:18:54.232 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(1558011897<open>)] for JPA transaction
10-06;00:18:54.232 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@2b55ac77]
10-06;00:18:54.233 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:18:54.233 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(1558011897<open>)]
10-06;00:18:54.233 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(1558011897<open>)] after transaction
10-06;00:18:54.235 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [null]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:18:54.235 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(1347211074<open>)] for JPA transaction
10-06;00:18:54.235 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@42130a5c]
10-06;00:18:54.237 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(1347211074<open>)] for JPA transaction
10-06;00:18:54.237 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:18:54.242 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(1347211074<open>)] for JPA transaction
10-06;00:18:54.242 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:18:54.243 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(1347211074<open>)] for JPA transaction
10-06;00:18:54.243 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:18:54.246 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(1347211074<open>)] for JPA transaction
10-06;00:18:54.246 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:18:54.247 DEBUG [                          main][              c.c.a.t.d.s.HistoryService][]: try to write to telegram with chat name: [653606407] message: [Добавлено желание: артикль 13341986, цена 300]
10-06;00:18:54.251 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(1347211074<open>)] for JPA transaction
10-06;00:18:54.251 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:18:54.252 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating transaction failed - marking existing transaction as rollback-only
10-06;00:18:54.252 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Setting JPA transaction on EntityManager [SessionImpl(1347211074<open>)] rollback-only
10-06;00:18:54.254 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating transaction failed - marking existing transaction as rollback-only
10-06;00:18:54.254 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Setting JPA transaction on EntityManager [SessionImpl(1347211074<open>)] rollback-only
10-06;00:18:54.255 DEBUG [                          main][             o.s.t.s.TransactionTemplate][]: Initiating transaction rollback on application exception
org.springframework.dao.DataIntegrityViolationException: not-null property references a null or transient value : com.company.app.telegram.domain.entity.Chat.mode; nested exception is org.hibernate.PropertyValueException: not-null property references a null or transient value : com.company.app.telegram.domain.entity.Chat.mode
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:294)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:551)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:174)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at jdk.proxy2/jdk.proxy2.$Proxy164.save(Unknown Source)
	at com.company.app.telegram.domain.repository.ChatRepository.findChatByChatNameOrCreateIfNotExist(ChatRepository.java:21)
	at java.base/java.lang.invoke.MethodHandle.invokeWithArguments(MethodHandle.java:732)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:86)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:174)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at jdk.proxy2/jdk.proxy2.$Proxy164.findChatByChatNameOrCreateIfNotExist(Unknown Source)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.mockito.internal.util.reflection.ReflectionMemberAccessor.invoke(ReflectionMemberAccessor.java:48)
	at org.mockito.internal.stubbing.defaultanswers.ForwardsInvocations.answer(ForwardsInvocations.java:49)
	at org.mockito.internal.handler.MockHandlerImpl.handle(MockHandlerImpl.java:110)
	at org.mockito.internal.handler.NullResultGuardian.handle(NullResultGuardian.java:29)
	at org.mockito.internal.handler.InvocationNotifierHandler.handle(InvocationNotifierHandler.java:34)
	at org.mockito.internal.creation.bytebuddy.MockMethodInterceptor.doIntercept(MockMethodInterceptor.java:82)
	at org.mockito.internal.creation.bytebuddy.MockMethodInterceptor.doIntercept(MockMethodInterceptor.java:56)
	at org.mockito.internal.creation.bytebuddy.MockMethodInterceptor$DispatcherDefaultingToRealMethod.interceptSuperCallable(MockMethodInterceptor.java:145)
	at com.company.app.telegram.domain.repository.ChatRepository$MockitoMock$1987170936.findChatByChatNameOrCreateIfNotExist(Unknown Source)
	at com.company.app.telegram.domain.service.HistoryService.saveHistory(HistoryService.java:46)
	at com.company.app.telegram.config.OutgoingMessageHandler.sendOneMessage(OutgoingMessageHandler.java:37)
	at com.company.app.telegram.config.OutgoingMessageHandler.sendToTargetChat(OutgoingMessageHandler.java:33)
	at com.company.app.telegram.TelegramFacade.writeToTargetChat(TelegramFacade.java:24)
	at com.company.app.telegram.TelegramFacade$$FastClassBySpringCGLIB$$9881a4fd.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:783)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:698)
	at com.company.app.telegram.TelegramFacade$$EnhancerBySpringCGLIB$$1ef510ef.writeToTargetChat(<generated>)
	at com.company.app.telegram.incoming_message_handler.message_executor.IncomingMessageTaskExecutor.lambda$processIncomingMessageTask$0(IncomingMessageTaskExecutor.java:47)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at com.company.app.telegram.incoming_message_handler.message_executor.IncomingMessageTaskExecutor.processIncomingMessageTask(IncomingMessageTaskExecutor.java:46)
	at com.company.app.telegram.incoming_message_handler.message_executor.IncomingMessageTaskExecutorTest.lambda$success_test$0(IncomingMessageTaskExecutorTest.java:39)
	at org.springframework.transaction.support.TransactionOperations.lambda$executeWithoutResult$0(TransactionOperations.java:68)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at org.springframework.transaction.support.TransactionTemplate$MockitoMock$1199509599.execute$accessor$AmHhOAFI(Unknown Source)
	at org.springframework.transaction.support.TransactionTemplate$MockitoMock$1199509599$auxiliary$ByjnkUXp.call(Unknown Source)
	at org.mockito.internal.invocation.RealMethod$FromCallable$1.call(RealMethod.java:40)
	at org.mockito.internal.invocation.RealMethod$FromBehavior.invoke(RealMethod.java:62)
	at org.mockito.internal.invocation.InterceptedInvocation.callRealMethod(InterceptedInvocation.java:142)
	at org.mockito.internal.stubbing.answers.CallsRealMethods.answer(CallsRealMethods.java:45)
	at org.mockito.Answers.answer(Answers.java:90)
	at org.mockito.internal.handler.MockHandlerImpl.handle(MockHandlerImpl.java:110)
	at org.mockito.internal.handler.NullResultGuardian.handle(NullResultGuardian.java:29)
	at org.mockito.internal.handler.InvocationNotifierHandler.handle(InvocationNotifierHandler.java:34)
	at org.mockito.internal.creation.bytebuddy.MockMethodInterceptor.doIntercept(MockMethodInterceptor.java:82)
	at org.mockito.internal.creation.bytebuddy.MockMethodInterceptor.doIntercept(MockMethodInterceptor.java:56)
	at org.mockito.internal.creation.bytebuddy.MockMethodInterceptor$DispatcherDefaultingToRealMethod.interceptSuperCallable(MockMethodInterceptor.java:145)
	at org.springframework.transaction.support.TransactionTemplate$MockitoMock$1199509599.execute(Unknown Source)
	at org.springframework.transaction.support.TransactionOperations.executeWithoutResult(TransactionOperations.java:67)
	at org.springframework.transaction.support.TransactionTemplate$MockitoMock$1199509599.executeWithoutResult$accessor$AmHhOAFI(Unknown Source)
	at org.springframework.transaction.support.TransactionTemplate$MockitoMock$1199509599$auxiliary$GJKblGt0.call(Unknown Source)
	at org.mockito.internal.invocation.RealMethod$FromCallable$1.call(RealMethod.java:40)
	at org.mockito.internal.invocation.RealMethod$FromBehavior.invoke(RealMethod.java:62)
	at org.mockito.internal.invocation.InterceptedInvocation.callRealMethod(InterceptedInvocation.java:142)
	at org.mockito.internal.stubbing.answers.CallsRealMethods.answer(CallsRealMethods.java:45)
	at org.mockito.Answers.answer(Answers.java:90)
	at org.mockito.internal.handler.MockHandlerImpl.handle(MockHandlerImpl.java:110)
	at org.mockito.internal.handler.NullResultGuardian.handle(NullResultGuardian.java:29)
	at org.mockito.internal.handler.InvocationNotifierHandler.handle(InvocationNotifierHandler.java:34)
	at org.mockito.internal.creation.bytebuddy.MockMethodInterceptor.doIntercept(MockMethodInterceptor.java:82)
	at org.mockito.internal.creation.bytebuddy.MockMethodInterceptor.doIntercept(MockMethodInterceptor.java:56)
	at org.mockito.internal.creation.bytebuddy.MockMethodInterceptor$DispatcherDefaultingToRealMethod.interceptSuperCallable(MockMethodInterceptor.java:145)
	at org.springframework.transaction.support.TransactionTemplate$MockitoMock$1199509599.executeWithoutResult(Unknown Source)
	at com.company.app.telegram.incoming_message_handler.message_executor.IncomingMessageTaskExecutorTest.success_test(IncomingMessageTaskExecutorTest.java:38)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:725)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:140)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:84)
	at org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115)
	at org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104)
	at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:98)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:214)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:210)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:135)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:66)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53)
	at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)
	at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:232)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)
Caused by: org.hibernate.PropertyValueException: not-null property references a null or transient value : com.company.app.telegram.domain.entity.Chat.mode
	at org.hibernate.engine.internal.Nullability.checkNullability(Nullability.java:111)
	at org.hibernate.engine.internal.Nullability.checkNullability(Nullability.java:55)
	at org.hibernate.action.internal.AbstractEntityInsertAction.nullifyTransientReferencesIfNotAlready(AbstractEntityInsertAction.java:116)
	at org.hibernate.action.internal.AbstractEntityInsertAction.makeEntityManaged(AbstractEntityInsertAction.java:125)
	at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:289)
	at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:263)
	at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:250)
	at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:338)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:287)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:193)
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:135)
	at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:185)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:128)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:55)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)
	at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:760)
	at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:746)
	at jdk.internal.reflect.GeneratedMethodAccessor86.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:311)
	at jdk.proxy2/jdk.proxy2.$Proxy159.persist(Unknown Source)
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:630)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:289)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:121)
	at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:529)
	at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:285)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:639)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:163)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:138)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:80)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 157 common frames omitted
10-06;00:18:54.256 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction rollback
10-06;00:18:54.256 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Rolling back JPA transaction on EntityManager [SessionImpl(1347211074<open>)]
10-06;00:18:54.257 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(1347211074<open>)] after transaction
10-06;00:18:54.294 INFO  [ SpringApplicationShutdownHook][j.LocalContainerEntityManagerFactoryBean][]: Closing JPA EntityManagerFactory for persistence unit 'default'
10-06;00:19:50.207 INFO  [                          main][.a.t.i.m.IncomingMessageTaskExecutorTest][]: Starting IncomingMessageTaskExecutorTest using Java 17.0.7 on user-VirtualBox with PID 6450 (started by user in /home/user/WORK/REPO/NO_WORK/TelegramNotificationService)
10-06;00:19:50.209 DEBUG [                          main][.a.t.i.m.IncomingMessageTaskExecutorTest][]: Running with Spring Boot v2.6.3, Spring v5.3.15
10-06;00:19:50.210 INFO  [                          main][.a.t.i.m.IncomingMessageTaskExecutorTest][]: No active profile set, falling back to default profiles: default
10-06;00:19:52.102 DEBUG [                          main][j.LocalContainerEntityManagerFactoryBean][]: Building JPA container EntityManagerFactory for persistence unit 'default'
10-06;00:19:52.814 INFO  [                          main][j.LocalContainerEntityManagerFactoryBean][]: Initialized JPA EntityManagerFactory for persistence unit 'default'
10-06;00:19:52.915 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:19:52.941 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:19:52.992 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:19:53.026 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:19:53.027 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:19:53.072 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:19:53.401 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:19:53.404 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:19:53.411 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:19:53.663 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:19:53.687 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:19:53.701 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:19:53.758 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:19:53.760 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:19:53.767 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:19:53.773 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:19:53.774 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:19:53.793 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:19:53.805 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:19:53.806 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:19:53.816 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:19:53.818 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:19:53.830 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:19:53.833 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:19:53.840 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:19:53.857 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:19:53.859 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:19:53.903 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:19:53.904 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:19:53.910 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:19:54.027 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [com.company.app.exchange_rate.component.ExchangeRateExtractor.extract]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:19:54.027 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(1082038911<open>)] for JPA transaction
10-06;00:19:54.028 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@722ee7c3]
10-06;00:19:54.040 DEBUG [                  scheduling-1][      c.c.a.c.a.l.p.PerformanceLogAspect][]: **********     created [com.company.app.core.aop.logging.performance.PerformanceLogAspect]     **********
10-06;00:19:54.044 DEBUG [                  scheduling-1][.a.c.a.l.p.c.PerformanceLogGuidExtractor][]: [5b3d0af6-bf0a-4242-8ceb-2e3a72947201] выковыривание guid заняло [1] ms.
10-06;00:19:54.044 DEBUG [                  scheduling-1][      c.c.a.c.a.l.p.PerformanceLogAspect][]: [5b3d0af6-bf0a-4242-8ceb-2e3a72947201]: запущен com.company.app.exchange_rate.component.ExchangeRateExtractor.extract
10-06;00:19:54.059 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(1082038911<open>)] for JPA transaction
10-06;00:19:54.060 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:19:54.081 DEBUG [                  scheduling-1][      c.c.a.c.a.l.p.PerformanceLogAspect][]: [5b3d0af6-bf0a-4242-8ceb-2e3a72947201]: за [39] ms выполнен com.company.app.exchange_rate.component.ExchangeRateExtractor.extract
10-06;00:19:54.082 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:19:54.082 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(1082038911<open>)]
10-06;00:19:54.090 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(1082038911<open>)] after transaction
10-06;00:19:54.090 DEBUG [                  scheduling-1][   c.c.a.e.s.ExchangeRateSchedulerConfig][]: exchange rate: ali: [105,83]
10-06;00:19:54.090 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [com.company.app.telegram.TelegramFacade.writeToEveryone]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:19:54.090 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(681855590<open>)] for JPA transaction
10-06;00:19:54.091 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@4d9c53ec]
10-06;00:19:54.098 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(681855590<open>)] for JPA transaction
10-06;00:19:54.098 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:19:54.133 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:19:54.133 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(681855590<open>)]
10-06;00:19:54.134 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(681855590<open>)] after transaction
10-06;00:19:54.569 INFO  [                          main][         c.c.a.t.c.TelegramBotConfigImpl][]: **********     The telegram bot has been created.     **********
10-06;00:19:54.652 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [com.company.app.telegram.domain.initializer.Initializer.init]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:19:54.652 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(1143894549<open>)] for JPA transaction
10-06;00:19:54.652 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@5b1ebbe]
10-06;00:19:54.655 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(1143894549<open>)] for JPA transaction
10-06;00:19:54.655 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:19:54.682 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(1143894549<open>)] for JPA transaction
10-06;00:19:54.682 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:19:54.690 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(1143894549<open>)] for JPA transaction
10-06;00:19:54.690 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:19:54.692 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:19:54.692 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(1143894549<open>)]
10-06;00:19:54.696 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(1143894549<open>)] after transaction
10-06;00:19:54.700 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.saveAll]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:19:54.700 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(382492241<open>)] for JPA transaction
10-06;00:19:54.700 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@72090a80]
10-06;00:19:54.701 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:19:54.701 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(382492241<open>)]
10-06;00:19:54.703 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(382492241<open>)] after transaction
10-06;00:19:54.706 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.saveAll]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:19:54.706 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(2111657749<open>)] for JPA transaction
10-06;00:19:54.706 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@d88d9d7]
10-06;00:19:54.707 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:19:54.707 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(2111657749<open>)]
10-06;00:19:54.707 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(2111657749<open>)] after transaction
10-06;00:19:54.711 INFO  [                          main][.a.t.i.m.IncomingMessageTaskExecutorTest][]: Started IncomingMessageTaskExecutorTest in 4.743 seconds (JVM running for 5.727)
10-06;00:19:54.746 INFO  [                          main][                       c.c.a.Application][]: *******************  The app has been started.  *******************
10-06;00:19:54.760 DEBUG [                          main][c.c.a.c.SpringBootTestApplicationContext][]: **********     run spring boot test context     **********
10-06;00:19:54.785 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findOne]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
10-06;00:19:54.786 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(1278488712<open>)] for JPA transaction
10-06;00:19:54.786 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@6f54d397]
10-06;00:19:54.802 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:19:54.803 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(1278488712<open>)]
10-06;00:19:54.803 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(1278488712<open>)] after transaction
10-06;00:19:54.841 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:19:54.841 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(449376924<open>)] for JPA transaction
10-06;00:19:54.841 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@1d07d728]
10-06;00:19:54.842 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:19:54.843 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(449376924<open>)]
10-06;00:19:54.844 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(449376924<open>)] after transaction
10-06;00:19:54.844 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:19:54.845 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(636690558<open>)] for JPA transaction
10-06;00:19:54.858 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@3d587c73]
10-06;00:19:54.859 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:19:54.859 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(636690558<open>)]
10-06;00:19:54.860 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(636690558<open>)] after transaction
10-06;00:19:57.319 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [null]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:19:57.319 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(1576107616<open>)] for JPA transaction
10-06;00:19:57.319 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@f9d7d3f]
10-06;00:19:58.943 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(1576107616<open>)] for JPA transaction
10-06;00:19:58.944 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:20:03.535 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(1576107616<open>)] for JPA transaction
10-06;00:20:03.535 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:20:03.537 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(1576107616<open>)] for JPA transaction
10-06;00:20:03.537 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:20:49.526 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(1576107616<open>)] for JPA transaction
10-06;00:20:49.527 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:20:49.528 DEBUG [                          main][              c.c.a.t.d.s.HistoryService][]: try to write to telegram with chat name: [653606407] message: [Добавлено желание: артикль 13341986, цена 300]
10-06;00:21:40.330 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(1576107616<open>)] for JPA transaction
10-06;00:21:40.330 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:24:40.235 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(1576107616<open>)] for JPA transaction
10-06;00:24:40.235 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:24:40.240 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating transaction failed - marking existing transaction as rollback-only
10-06;00:24:40.241 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Setting JPA transaction on EntityManager [SessionImpl(1576107616<open>)] rollback-only
10-06;00:24:40.243 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating transaction failed - marking existing transaction as rollback-only
10-06;00:24:40.243 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Setting JPA transaction on EntityManager [SessionImpl(1576107616<open>)] rollback-only
10-06;00:24:40.245 DEBUG [                          main][             o.s.t.s.TransactionTemplate][]: Initiating transaction rollback on application exception
org.springframework.dao.DataIntegrityViolationException: not-null property references a null or transient value : com.company.app.telegram.domain.entity.Chat.mode; nested exception is org.hibernate.PropertyValueException: not-null property references a null or transient value : com.company.app.telegram.domain.entity.Chat.mode
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:294)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:551)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:174)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at jdk.proxy2/jdk.proxy2.$Proxy164.save(Unknown Source)
	at com.company.app.telegram.domain.repository.ChatRepository.findChatByChatNameOrCreateIfNotExist(ChatRepository.java:21)
	at java.base/java.lang.invoke.MethodHandle.invokeWithArguments(MethodHandle.java:732)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:86)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:174)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at jdk.proxy2/jdk.proxy2.$Proxy164.findChatByChatNameOrCreateIfNotExist(Unknown Source)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.mockito.internal.util.reflection.ReflectionMemberAccessor.invoke(ReflectionMemberAccessor.java:48)
	at org.mockito.internal.stubbing.defaultanswers.ForwardsInvocations.answer(ForwardsInvocations.java:49)
	at org.mockito.internal.handler.MockHandlerImpl.handle(MockHandlerImpl.java:110)
	at org.mockito.internal.handler.NullResultGuardian.handle(NullResultGuardian.java:29)
	at org.mockito.internal.handler.InvocationNotifierHandler.handle(InvocationNotifierHandler.java:34)
	at org.mockito.internal.creation.bytebuddy.MockMethodInterceptor.doIntercept(MockMethodInterceptor.java:82)
	at org.mockito.internal.creation.bytebuddy.MockMethodInterceptor.doIntercept(MockMethodInterceptor.java:56)
	at org.mockito.internal.creation.bytebuddy.MockMethodInterceptor$DispatcherDefaultingToRealMethod.interceptSuperCallable(MockMethodInterceptor.java:145)
	at com.company.app.telegram.domain.repository.ChatRepository$MockitoMock$1846115627.findChatByChatNameOrCreateIfNotExist(Unknown Source)
	at com.company.app.telegram.domain.service.HistoryService.saveHistory(HistoryService.java:46)
	at com.company.app.telegram.config.OutgoingMessageHandler.sendOneMessage(OutgoingMessageHandler.java:37)
	at com.company.app.telegram.config.OutgoingMessageHandler.sendToTargetChat(OutgoingMessageHandler.java:33)
	at com.company.app.telegram.TelegramFacade.writeToTargetChat(TelegramFacade.java:24)
	at com.company.app.telegram.TelegramFacade$$FastClassBySpringCGLIB$$9881a4fd.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:783)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:698)
	at com.company.app.telegram.TelegramFacade$$EnhancerBySpringCGLIB$$4a8dfe5e.writeToTargetChat(<generated>)
	at com.company.app.telegram.incoming_message_handler.message_executor.IncomingMessageTaskExecutor.lambda$processIncomingMessageTask$0(IncomingMessageTaskExecutor.java:47)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at com.company.app.telegram.incoming_message_handler.message_executor.IncomingMessageTaskExecutor.processIncomingMessageTask(IncomingMessageTaskExecutor.java:46)
	at com.company.app.telegram.incoming_message_handler.message_executor.IncomingMessageTaskExecutorTest.lambda$success_test$0(IncomingMessageTaskExecutorTest.java:39)
	at org.springframework.transaction.support.TransactionOperations.lambda$executeWithoutResult$0(TransactionOperations.java:68)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at org.springframework.transaction.support.TransactionTemplate$MockitoMock$127981827.execute$accessor$GJQR6d1F(Unknown Source)
	at org.springframework.transaction.support.TransactionTemplate$MockitoMock$127981827$auxiliary$n8yGQYPe.call(Unknown Source)
	at org.mockito.internal.invocation.RealMethod$FromCallable$1.call(RealMethod.java:40)
	at org.mockito.internal.invocation.RealMethod$FromBehavior.invoke(RealMethod.java:62)
	at org.mockito.internal.invocation.InterceptedInvocation.callRealMethod(InterceptedInvocation.java:142)
	at org.mockito.internal.stubbing.answers.CallsRealMethods.answer(CallsRealMethods.java:45)
	at org.mockito.Answers.answer(Answers.java:90)
	at org.mockito.internal.handler.MockHandlerImpl.handle(MockHandlerImpl.java:110)
	at org.mockito.internal.handler.NullResultGuardian.handle(NullResultGuardian.java:29)
	at org.mockito.internal.handler.InvocationNotifierHandler.handle(InvocationNotifierHandler.java:34)
	at org.mockito.internal.creation.bytebuddy.MockMethodInterceptor.doIntercept(MockMethodInterceptor.java:82)
	at org.mockito.internal.creation.bytebuddy.MockMethodInterceptor.doIntercept(MockMethodInterceptor.java:56)
	at org.mockito.internal.creation.bytebuddy.MockMethodInterceptor$DispatcherDefaultingToRealMethod.interceptSuperCallable(MockMethodInterceptor.java:145)
	at org.springframework.transaction.support.TransactionTemplate$MockitoMock$127981827.execute(Unknown Source)
	at org.springframework.transaction.support.TransactionOperations.executeWithoutResult(TransactionOperations.java:67)
	at org.springframework.transaction.support.TransactionTemplate$MockitoMock$127981827.executeWithoutResult$accessor$GJQR6d1F(Unknown Source)
	at org.springframework.transaction.support.TransactionTemplate$MockitoMock$127981827$auxiliary$RPIOmY6s.call(Unknown Source)
	at org.mockito.internal.invocation.RealMethod$FromCallable$1.call(RealMethod.java:40)
	at org.mockito.internal.invocation.RealMethod$FromBehavior.invoke(RealMethod.java:62)
	at org.mockito.internal.invocation.InterceptedInvocation.callRealMethod(InterceptedInvocation.java:142)
	at org.mockito.internal.stubbing.answers.CallsRealMethods.answer(CallsRealMethods.java:45)
	at org.mockito.Answers.answer(Answers.java:90)
	at org.mockito.internal.handler.MockHandlerImpl.handle(MockHandlerImpl.java:110)
	at org.mockito.internal.handler.NullResultGuardian.handle(NullResultGuardian.java:29)
	at org.mockito.internal.handler.InvocationNotifierHandler.handle(InvocationNotifierHandler.java:34)
	at org.mockito.internal.creation.bytebuddy.MockMethodInterceptor.doIntercept(MockMethodInterceptor.java:82)
	at org.mockito.internal.creation.bytebuddy.MockMethodInterceptor.doIntercept(MockMethodInterceptor.java:56)
	at org.mockito.internal.creation.bytebuddy.MockMethodInterceptor$DispatcherDefaultingToRealMethod.interceptSuperCallable(MockMethodInterceptor.java:145)
	at org.springframework.transaction.support.TransactionTemplate$MockitoMock$127981827.executeWithoutResult(Unknown Source)
	at com.company.app.telegram.incoming_message_handler.message_executor.IncomingMessageTaskExecutorTest.success_test(IncomingMessageTaskExecutorTest.java:38)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:725)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:140)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:84)
	at org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115)
	at org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104)
	at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:98)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:214)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:210)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:135)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:66)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53)
	at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)
	at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:232)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)
Caused by: org.hibernate.PropertyValueException: not-null property references a null or transient value : com.company.app.telegram.domain.entity.Chat.mode
	at org.hibernate.engine.internal.Nullability.checkNullability(Nullability.java:111)
	at org.hibernate.engine.internal.Nullability.checkNullability(Nullability.java:55)
	at org.hibernate.action.internal.AbstractEntityInsertAction.nullifyTransientReferencesIfNotAlready(AbstractEntityInsertAction.java:116)
	at org.hibernate.action.internal.AbstractEntityInsertAction.makeEntityManaged(AbstractEntityInsertAction.java:125)
	at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:289)
	at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:263)
	at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:250)
	at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:338)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:287)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:193)
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:135)
	at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:185)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:128)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:55)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)
	at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:760)
	at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:746)
	at jdk.internal.reflect.GeneratedMethodAccessor86.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:311)
	at jdk.proxy2/jdk.proxy2.$Proxy159.persist(Unknown Source)
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:630)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:289)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:121)
	at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:529)
	at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:285)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:639)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:163)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:138)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:80)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 157 common frames omitted
10-06;00:24:40.246 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction rollback
10-06;00:24:40.246 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Rolling back JPA transaction on EntityManager [SessionImpl(1576107616<open>)]
10-06;00:24:40.248 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(1576107616<open>)] after transaction
10-06;00:24:40.290 INFO  [ SpringApplicationShutdownHook][j.LocalContainerEntityManagerFactoryBean][]: Closing JPA EntityManagerFactory for persistence unit 'default'
10-06;00:32:18.549 INFO  [                          main][       c.c.a.w.c.SupplierInitializerTest][]: Starting SupplierInitializerTest using Java 17.0.7 on user-VirtualBox with PID 6861 (started by user in /home/user/WORK/REPO/NO_WORK/TelegramNotificationService)
10-06;00:32:18.551 DEBUG [                          main][       c.c.a.w.c.SupplierInitializerTest][]: Running with Spring Boot v2.6.3, Spring v5.3.15
10-06;00:32:18.551 INFO  [                          main][       c.c.a.w.c.SupplierInitializerTest][]: No active profile set, falling back to default profiles: default
10-06;00:32:21.130 DEBUG [                          main][j.LocalContainerEntityManagerFactoryBean][]: Building JPA container EntityManagerFactory for persistence unit 'default'
10-06;00:32:22.258 INFO  [                          main][j.LocalContainerEntityManagerFactoryBean][]: Initialized JPA EntityManagerFactory for persistence unit 'default'
10-06;00:32:22.372 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:32:22.417 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:32:22.468 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:32:22.538 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:32:22.539 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:32:22.570 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:32:22.659 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:32:22.660 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:32:22.667 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:32:22.855 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:32:22.858 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:32:22.865 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:32:23.155 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:32:23.158 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:32:23.163 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:32:23.170 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:32:23.173 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:32:23.177 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:32:23.183 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:32:23.188 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:32:23.202 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:32:23.203 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:32:23.212 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:32:23.214 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:32:23.244 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:32:23.365 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:32:23.367 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:32:23.377 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:32:23.383 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:32:23.386 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:32:23.519 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [com.company.app.exchange_rate.component.ExchangeRateExtractor.extract]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:32:23.522 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(843412681<open>)] for JPA transaction
10-06;00:32:23.524 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@179b2649]
10-06;00:32:23.538 DEBUG [                  scheduling-1][      c.c.a.c.a.l.p.PerformanceLogAspect][]: **********     created [com.company.app.core.aop.logging.performance.PerformanceLogAspect]     **********
10-06;00:32:23.543 DEBUG [                  scheduling-1][.a.c.a.l.p.c.PerformanceLogGuidExtractor][]: [5f258569-5bc4-439c-947a-d93940e9a96e] выковыривание guid заняло [0] ms.
10-06;00:32:23.544 DEBUG [                  scheduling-1][      c.c.a.c.a.l.p.PerformanceLogAspect][]: [5f258569-5bc4-439c-947a-d93940e9a96e]: запущен com.company.app.exchange_rate.component.ExchangeRateExtractor.extract
10-06;00:32:23.575 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(843412681<open>)] for JPA transaction
10-06;00:32:23.575 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:32:23.630 DEBUG [                  scheduling-1][      c.c.a.c.a.l.p.PerformanceLogAspect][]: [5f258569-5bc4-439c-947a-d93940e9a96e]: за [88] ms выполнен com.company.app.exchange_rate.component.ExchangeRateExtractor.extract
10-06;00:32:23.631 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:32:23.631 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(843412681<open>)]
10-06;00:32:23.661 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(843412681<open>)] after transaction
10-06;00:32:23.662 DEBUG [                  scheduling-1][   c.c.a.e.s.ExchangeRateSchedulerConfig][]: exchange rate: ali: [105,83]
10-06;00:32:23.662 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [com.company.app.telegram.TelegramFacade.writeToEveryone]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:32:23.662 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(1637682832<open>)] for JPA transaction
10-06;00:32:23.663 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@44df9f70]
10-06;00:32:23.680 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(1637682832<open>)] for JPA transaction
10-06;00:32:23.680 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:32:23.702 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:32:23.702 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(1637682832<open>)]
10-06;00:32:23.702 DEBUG [                  scheduling-1][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(1637682832<open>)] after transaction
10-06;00:32:24.290 INFO  [                          main][         c.c.a.t.c.TelegramBotConfigImpl][]: **********     The telegram bot has been created.     **********
10-06;00:32:24.406 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [com.company.app.telegram.domain.initializer.Initializer.init]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:32:24.406 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(1782972093<open>)] for JPA transaction
10-06;00:32:24.406 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@24c9fa8e]
10-06;00:32:24.411 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(1782972093<open>)] for JPA transaction
10-06;00:32:24.411 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:32:24.453 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(1782972093<open>)] for JPA transaction
10-06;00:32:24.453 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:32:24.464 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(1782972093<open>)] for JPA transaction
10-06;00:32:24.464 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:32:24.466 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:32:24.467 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(1782972093<open>)]
10-06;00:32:24.473 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(1782972093<open>)] after transaction
10-06;00:32:24.477 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.saveAll]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:32:24.477 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(855681925<open>)] for JPA transaction
10-06;00:32:24.477 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@27a5a927]
10-06;00:32:24.479 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:32:24.479 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(855681925<open>)]
10-06;00:32:24.480 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(855681925<open>)] after transaction
10-06;00:32:24.483 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.saveAll]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:32:24.484 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(1104616428<open>)] for JPA transaction
10-06;00:32:24.484 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@3ba15499]
10-06;00:32:24.497 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:32:24.497 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(1104616428<open>)]
10-06;00:32:24.503 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(1104616428<open>)] after transaction
10-06;00:32:24.507 INFO  [                          main][       c.c.a.w.c.SupplierInitializerTest][]: Started SupplierInitializerTest in 6.22 seconds (JVM running for 7.477)
10-06;00:32:24.527 INFO  [                          main][                       c.c.a.Application][]: *******************  The app has been started.  *******************
10-06;00:32:24.559 DEBUG [                          main][c.c.a.c.SpringBootTestApplicationContext][]: **********     run spring boot test context     **********
10-06;00:32:24.586 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findAll]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
10-06;00:32:24.586 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(2118097119<open>)] for JPA transaction
10-06;00:32:24.588 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@6b043bbe]
10-06;00:32:24.607 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:32:24.608 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(2118097119<open>)]
10-06;00:32:24.608 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(2118097119<open>)] after transaction
10-06;00:32:24.641 DEBUG [                          main][c.c.a.c.SpringBootTestApplicationContext][]: **********     run spring boot test context     **********
10-06;00:32:24.644 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:32:24.645 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(1959004179<open>)] for JPA transaction
10-06;00:32:24.645 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@32fc3125]
10-06;00:32:24.646 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:32:24.646 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(1959004179<open>)]
10-06;00:32:24.647 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(1959004179<open>)] after transaction
10-06;00:32:24.647 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [com.company.app.wildberries_desire_lot.scheduler.executor.component.WildberriesDesireLotRefresher.refresh]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:32:24.648 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(1331895677<open>)] for JPA transaction
10-06;00:32:24.648 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@4b4786cb]
10-06;00:32:24.648 DEBUG [                          main][.a.c.a.l.p.c.PerformanceLogGuidExtractor][]: [11419ad3-d78a-4373-88a7-10659875e405] выковыривание guid заняло [0] ms.
10-06;00:32:24.648 DEBUG [                          main][      c.c.a.c.a.l.p.PerformanceLogAspect][]: [11419ad3-d78a-4373-88a7-10659875e405]: запущен com.company.app.wildberries_desire_lot.scheduler.executor.component.WildberriesDesireLotRefresher.refresh
10-06;00:32:24.651 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(1331895677<open>)] for JPA transaction
10-06;00:32:24.652 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:32:24.655 DEBUG [                          main][               c.c.a.c.GetRequestHandler][]: try to get response: [https://card.wb.ru/cards/detail?appType=1&curr=rub&dest=-1257786&regions=80,38,83,4,64,33,68,70,30,40,86,75,69,1,66,110,22,48,31,71,114&spp=31&nm=43409221]
10-06;00:32:24.967 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(1331895677<open>)] for JPA transaction
10-06;00:32:24.967 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:32:24.971 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(1331895677<open>)] for JPA transaction
10-06;00:32:24.971 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:32:24.973 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(1331895677<open>)] for JPA transaction
10-06;00:32:24.973 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:32:24.976 DEBUG [                          main][      c.c.a.c.a.l.p.PerformanceLogAspect][]: [11419ad3-d78a-4373-88a7-10659875e405]: за [327] ms выполнен com.company.app.wildberries_desire_lot.scheduler.executor.component.WildberriesDesireLotRefresher.refresh
10-06;00:32:24.976 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:32:24.977 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(1331895677<open>)]
10-06;00:32:24.981 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(1331895677<open>)] after transaction
10-06;00:32:24.988 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:32:24.992 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:32:25.015 DEBUG [                          main][c.c.a.c.SpringBootTestApplicationContext][]: **********     run spring boot test context     **********
10-06;00:32:25.017 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:32:25.017 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(1207052505<open>)] for JPA transaction
10-06;00:32:25.018 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@3308560f]
10-06;00:32:25.018 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:32:25.018 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(1207052505<open>)]
10-06;00:32:25.019 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(1207052505<open>)] after transaction
10-06;00:32:25.020 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:32:25.020 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(668953736<open>)] for JPA transaction
10-06;00:32:25.020 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@33592b53]
10-06;00:32:25.021 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:32:25.021 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(668953736<open>)]
10-06;00:32:25.022 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(668953736<open>)] after transaction
10-06;00:32:25.022 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:32:25.022 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(1393606421<open>)] for JPA transaction
10-06;00:32:25.022 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@1b2adb50]
10-06;00:32:25.025 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:32:25.025 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(1393606421<open>)]
10-06;00:32:25.026 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(1393606421<open>)] after transaction
10-06;00:32:25.027 DEBUG [                          main][tor$SharedEntityManagerInvocationHandler][]: Creating new EntityManager for shared EntityManager invocation
10-06;00:32:25.050 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.saveAll]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:32:25.050 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(2014154314<open>)] for JPA transaction
10-06;00:32:25.050 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@3de81082]
10-06;00:32:25.051 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:32:25.051 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(2014154314<open>)]
10-06;00:32:25.053 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(2014154314<open>)] after transaction
10-06;00:32:25.053 DEBUG [                          main][c.c.a.c.SpringBootTestApplicationContext][]: **********     run spring boot test context     **********
10-06;00:32:25.055 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findAll]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
10-06;00:32:25.055 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(331165472<open>)] for JPA transaction
10-06;00:32:25.056 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@704155da]
10-06;00:32:25.058 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:32:25.058 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(331165472<open>)]
10-06;00:32:25.059 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(331165472<open>)] after transaction
10-06;00:32:25.066 DEBUG [                          main][c.c.a.c.SpringBootTestApplicationContext][]: **********     run spring boot test context     **********
10-06;00:32:25.069 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [null]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:32:25.069 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(2025606245<open>)] for JPA transaction
10-06;00:32:25.069 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@4f814423]
10-06;00:32:25.069 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(2025606245<open>)] for JPA transaction
10-06;00:32:25.069 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:32:25.073 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(2025606245<open>)] for JPA transaction
10-06;00:32:25.073 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:32:25.074 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(2025606245<open>)] for JPA transaction
10-06;00:32:25.074 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:32:25.074 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:32:25.074 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(2025606245<open>)]
10-06;00:32:25.076 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(2025606245<open>)] after transaction
10-06;00:32:25.076 DEBUG [                          main][.WildberriesDesireControllerExecutorTest][]: *****
10-06;00:32:25.077 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [com.company.app.wildberries_desire_lot.controller.executor.WildberriesDesireControllerExecutor.getFulfilledDesires]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:32:25.077 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(842513561<open>)] for JPA transaction
10-06;00:32:25.077 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@7d1ec8bc]
10-06;00:32:25.077 DEBUG [                          main][.a.c.a.l.p.c.PerformanceLogGuidExtractor][]: [681abe95-d5de-41a1-8d55-2de1246a0997] выковыривание guid заняло [0] ms.
10-06;00:32:25.077 DEBUG [                          main][      c.c.a.c.a.l.p.PerformanceLogAspect][]: [681abe95-d5de-41a1-8d55-2de1246a0997]: запущен com.company.app.wildberries_desire_lot.controller.executor.WildberriesDesireControllerExecutor.getFulfilledDesires
10-06;00:32:25.082 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(842513561<open>)] for JPA transaction
10-06;00:32:25.082 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:32:25.090 DEBUG [                          main][      c.c.a.c.a.l.p.PerformanceLogAspect][]: [681abe95-d5de-41a1-8d55-2de1246a0997]: за [13] ms вернул [1] шт. выполнен com.company.app.wildberries_desire_lot.controller.executor.WildberriesDesireControllerExecutor.getFulfilledDesires
10-06;00:32:25.090 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:32:25.090 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(842513561<open>)]
10-06;00:32:25.091 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(842513561<open>)] after transaction
10-06;00:32:25.091 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [com.company.app.wildberries_desire_lot.controller.executor.WildberriesDesireControllerExecutor.getFulfilledDesires]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:32:25.091 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(977570654<open>)] for JPA transaction
10-06;00:32:25.091 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@16e9fc1f]
10-06;00:32:25.092 DEBUG [                          main][.a.c.a.l.p.c.PerformanceLogGuidExtractor][]: [fb78b51b-6e1d-40f3-8d28-f2ea43ecf469] выковыривание guid заняло [0] ms.
10-06;00:32:25.092 DEBUG [                          main][      c.c.a.c.a.l.p.PerformanceLogAspect][]: [fb78b51b-6e1d-40f3-8d28-f2ea43ecf469]: запущен com.company.app.wildberries_desire_lot.controller.executor.WildberriesDesireControllerExecutor.getFulfilledDesires
10-06;00:32:25.092 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(977570654<open>)] for JPA transaction
10-06;00:32:25.092 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:32:25.093 DEBUG [                          main][      c.c.a.c.a.l.p.PerformanceLogAspect][]: [fb78b51b-6e1d-40f3-8d28-f2ea43ecf469]: за [1] ms вернул [0] шт. выполнен com.company.app.wildberries_desire_lot.controller.executor.WildberriesDesireControllerExecutor.getFulfilledDesires
10-06;00:32:25.093 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:32:25.093 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(977570654<open>)]
10-06;00:32:25.093 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(977570654<open>)] after transaction
10-06;00:32:25.100 DEBUG [                          main][c.c.a.c.SpringBootTestApplicationContext][]: **********     run spring boot test context     **********
10-06;00:32:25.108 DEBUG [                          main][c.c.a.c.SpringBootTestApplicationContext][]: **********     run spring boot test context     **********
10-06;00:32:25.140 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findOne]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
10-06;00:32:25.140 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(1929823960<open>)] for JPA transaction
10-06;00:32:25.141 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@174f796d]
10-06;00:32:25.164 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:32:25.164 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(1929823960<open>)]
10-06;00:32:25.165 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(1929823960<open>)] after transaction
10-06;00:32:25.167 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:32:25.167 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(426985128<open>)] for JPA transaction
10-06;00:32:25.167 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@aa7ca4c]
10-06;00:32:25.168 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:32:25.168 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(426985128<open>)]
10-06;00:32:25.169 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(426985128<open>)] after transaction
10-06;00:32:25.169 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:32:25.169 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(163873627<open>)] for JPA transaction
10-06;00:32:25.169 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@95acffa]
10-06;00:32:25.170 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:32:25.170 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(163873627<open>)]
10-06;00:32:25.171 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(163873627<open>)] after transaction
10-06;00:32:25.171 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [null]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
10-06;00:32:25.171 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(1942709569<open>)] for JPA transaction
10-06;00:32:25.171 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@3bf1321d]
10-06;00:32:25.172 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(1942709569<open>)] for JPA transaction
10-06;00:32:25.172 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:32:25.175 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(1942709569<open>)] for JPA transaction
10-06;00:32:25.176 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:32:25.176 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(1942709569<open>)] for JPA transaction
10-06;00:32:25.176 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:32:25.179 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(1942709569<open>)] for JPA transaction
10-06;00:32:25.179 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:32:25.180 DEBUG [                          main][              c.c.a.t.d.s.HistoryService][]: try to write to telegram with chat name: [653606407] message: [Добавлено желание: артикль 13341986, цена 300]
10-06;00:32:25.194 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(1942709569<open>)] for JPA transaction
10-06;00:32:25.195 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:32:25.196 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Found thread-bound EntityManager [SessionImpl(1942709569<open>)] for JPA transaction
10-06;00:32:25.196 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Participating in existing transaction
10-06;00:32:25.466 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:32:25.466 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(1942709569<open>)]
10-06;00:32:25.475 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(1942709569<open>)] after transaction
10-06;00:32:25.476 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findAll]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
10-06;00:32:25.476 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(291681646<open>)] for JPA transaction
10-06;00:32:25.476 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@225499d2]
10-06;00:32:25.479 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:32:25.479 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(291681646<open>)]
10-06;00:32:25.479 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(291681646<open>)] after transaction
10-06;00:32:25.590 DEBUG [                          main][c.c.a.c.SpringBootTestApplicationContext][]: **********     run spring boot test context     **********
10-06;00:32:25.600 DEBUG [                          main][c.c.a.c.SpringBootTestApplicationContext][]: **********     run spring boot test context     **********
10-06;00:32:25.602 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findAll]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
10-06;00:32:25.602 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Opened new EntityManager [SessionImpl(869533279<open>)] for JPA transaction
10-06;00:32:25.602 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@3fe10c5f]
10-06;00:32:25.604 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Initiating transaction commit
10-06;00:32:25.604 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Committing JPA transaction on EntityManager [SessionImpl(869533279<open>)]
10-06;00:32:25.604 DEBUG [                          main][           o.s.o.j.JpaTransactionManager][]: Closing JPA EntityManager [SessionImpl(869533279<open>)] after transaction
10-06;00:32:25.621 INFO  [ SpringApplicationShutdownHook][j.LocalContainerEntityManagerFactoryBean][]: Closing JPA EntityManagerFactory for persistence unit 'default'
